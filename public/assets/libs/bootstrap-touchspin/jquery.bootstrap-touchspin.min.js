"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=function(n,o){return void 0===o&&(o="undefined"!=typeof window?require("jquery"):require("jquery")(n)),t(o),o}:t(jQuery)}(function(t){var n=0;t.fn.TouchSpin=function(o){var a={min:0,max:100,initval:"",replacementval:"",firstclickvalueifempty:null,step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalup:"&plus;",verticaldown:"&minus;",verticalupclass:"",verticaldownclass:"",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-primary",buttonup_class:"btn btn-primary",buttondown_txt:"&minus;",buttonup_txt:"&plus;",callback_before_calculation:function(t){return t},callback_after_calculation:function(t){return t}},e={min:"min",max:"max",initval:"init-val",replacementval:"replacement-val",firstclickvalueifempty:"first-click-value-if-empty",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){var s,i,p,u,c,r,l,d,f,b,h,m,v,x,g,y,w,_=t(this),k=_.data(),C=0,F=!1;function j(){""===s.prefix&&(i=u.prefix.detach()),""===s.postfix&&(p=u.postfix.detach())}function D(){var t,n,o=s.callback_before_calculation(_.val());""===o?""!==s.replacementval&&(_.val(s.replacementval),_.trigger("change")):0<s.decimals&&"."===o||(t=parseFloat(o),(n=t=isNaN(t)?""!==s.replacementval?s.replacementval:0:t).toString()!==o&&(n=t),n=function(t){switch(s.forcestepdivisibility){case"round":return(Math.round(t/s.step)*s.step).toFixed(s.decimals);case"floor":return(Math.floor(t/s.step)*s.step).toFixed(s.decimals);case"ceil":return(Math.ceil(t/s.step)*s.step).toFixed(s.decimals);default:return t.toFixed(s.decimals)}}(t),null!==s.min&&t<s.min&&(n=s.min),null!==s.max&&t>s.max&&(n=s.max),parseFloat(t).toString()!==parseFloat(n).toString()&&_.val(n),_.val(s.callback_after_calculation(parseFloat(n).toFixed(s.decimals))))}function M(){var t;return s.booster?(t=Math.pow(2,Math.floor(C/s.boostat))*s.step,s.maxboostedstep&&t>s.maxboostedstep&&(t=s.maxboostedstep,r=Math.round(r/t)*t),Math.max(s.step,t)):s.step}function S(){return"number"==typeof s.firstclickvalueifempty?s.firstclickvalueifempty:(s.min+s.max)/2}function P(){var t=_.is(":disabled,[readonly]");u.up.prop("disabled",t),u.down.prop("disabled",t),t&&A()}function N(){var t,n;_.is(":disabled,[readonly]")||(D(),t=r=parseFloat(s.callback_before_calculation(u.input.val())),isNaN(r)?r=S():(n=M(),r+=n),null!==s.max&&r>=s.max&&(r=s.max,_.trigger("touchspin.on.max"),A()),u.input.val(s.callback_after_calculation(parseFloat(r).toFixed(s.decimals))),t!==r&&_.trigger("change"))}function q(){var t,n;_.is(":disabled,[readonly]")||(D(),t=r=parseFloat(s.callback_before_calculation(u.input.val())),isNaN(r)?r=S():(n=M(),r-=n),null!==s.min&&r<=s.min&&(r=s.min,_.trigger("touchspin.on.min"),A()),u.input.val(s.callback_after_calculation(parseFloat(r).toFixed(s.decimals))),t!==r&&_.trigger("change"))}function B(){_.is(":disabled,[readonly]")||(A(),C=0,F="down",_.trigger("touchspin.on.startspin"),_.trigger("touchspin.on.startdownspin"),f=setTimeout(function(){l=setInterval(function(){C++,q()},s.stepinterval)},s.stepintervaldelay))}function T(){_.is(":disabled,[readonly]")||(A(),C=0,F="up",_.trigger("touchspin.on.startspin"),_.trigger("touchspin.on.startupspin"),b=setTimeout(function(){d=setInterval(function(){C++,N()},s.stepinterval)},s.stepintervaldelay))}function A(){switch(clearTimeout(f),clearTimeout(b),clearInterval(l),clearInterval(d),F){case"up":_.trigger("touchspin.on.stopupspin"),_.trigger("touchspin.on.stopspin");break;case"down":_.trigger("touchspin.on.stopdownspin"),_.trigger("touchspin.on.stopspin")}C=0,F=!1}_.data("alreadyinitialized")||(_.data("alreadyinitialized",!0),n+=1,_.data("spinnerid",n),_.is("input")?(s=t.extend({},a,k,function(){var n={};return t.each(e,function(t,o){o="bts-"+o,_.is("[data-"+o+"]")&&(n[t]=_.data(o))}),t.each(["min","max","step"],function(t,o){_.is("["+o+"]")&&(void 0!==n[o]&&console.warn('Both the "data-bts-'+o+'" data attribute and the "'+o+'" individual attribute were specified, the individual attribute will take precedence on: ',_),n[o]=_.attr(o))}),n}(),o),1!==parseFloat(s.step)&&(0!=(h=s.max%s.step)&&(s.max=parseFloat(s.max)-h),0!=(h=s.min%s.step))&&(s.min=parseFloat(s.min)+(parseFloat(s.step)-h)),""!==s.initval&&""===_.val()&&_.val(s.initval),D(),h=_.val(),k=_.parent(),""!==h&&(h=s.callback_before_calculation(h),h=s.callback_after_calculation(parseFloat(h).toFixed(s.decimals))),_.data("initvalue",h).val(h),_.addClass("form-control"),c='\n          <span class="input-group-addon bootstrap-touchspin-vertical-button-wrapper">\n            <span class="input-group-btn-vertical">\n              <button tabindex="-1" class="'.concat(s.buttondown_class," bootstrap-touchspin-up ").concat(s.verticalupclass,'" type="button">').concat(s.verticalup,'</button>\n              <button tabindex="-1" class="').concat(s.buttonup_class," bootstrap-touchspin-down ").concat(s.verticaldownclass,'" type="button">').concat(s.verticaldown,"</button>\n            </span>\n          </span>\n       "),k.hasClass("input-group")?(k.addClass("bootstrap-touchspin"),w=_.prev(),x=_.next(),g='\n            <span class="input-group-addon input-group-prepend bootstrap-touchspin-prefix input-group-prepend bootstrap-touchspin-injected">\n              <span class="input-group-text">'.concat(s.prefix,"</span>\n            </span>\n          "),y='\n            <span class="input-group-addon input-group-append bootstrap-touchspin-postfix input-group-append bootstrap-touchspin-injected">\n              <span class="input-group-text">'.concat(s.postfix,"</span>\n            </span>\n          "),s.verticalbuttons?t(c).insertAfter(_):(w.hasClass("input-group-btn")||w.hasClass("input-group-prepend")?(m='\n              <button tabindex="-1" class="'.concat(s.buttondown_class,' bootstrap-touchspin-down bootstrap-touchspin-injected" type="button">').concat(s.buttondown_txt,"</button>\n            "),w.append(m)):(m='\n              <span class="input-group-btn input-group-prepend bootstrap-touchspin-injected">\n                <button tabindex="-1" class="'.concat(s.buttondown_class,' bootstrap-touchspin-down" type="button">').concat(s.buttondown_txt,"</button>\n              </span>\n            "),t(m).insertBefore(_)),x.hasClass("input-group-btn")||x.hasClass("input-group-append")?(v='\n            <button tabindex="-1" class="'.concat(s.buttonup_class,' bootstrap-touchspin-up bootstrap-touchspin-injected" type="button">').concat(s.buttonup_txt,"</button>\n          "),x.prepend(v)):(v='\n            <span class="input-group-btn input-group-append bootstrap-touchspin-injected">\n              <button tabindex="-1" class="'.concat(s.buttonup_class,' bootstrap-touchspin-up" type="button">').concat(s.buttonup_txt,"</button>\n            </span>\n          "),t(v).insertAfter(_))),t(g).insertBefore(_),t(y).insertAfter(_),m=k):(w="",_.hasClass("input-sm")||_.hasClass("form-control-sm")?w="input-group-sm":(_.hasClass("input-lg")||_.hasClass("form-control-lg"))&&(w="input-group-lg"),w=s.verticalbuttons?'\n            <div class="input-group '.concat(w,' bootstrap-touchspin bootstrap-touchspin-injected">\n              <span class="input-group-addon input-group-prepend bootstrap-touchspin-prefix">\n                <span class="input-group-text">').concat(s.prefix,'</span>\n              </span>\n              <span class="input-group-addon bootstrap-touchspin-postfix input-group-append">\n                <span class="input-group-text">').concat(s.postfix,"</span>\n              </span>\n              ").concat(c,"\n            </div>\n          "):'\n            <div class="input-group bootstrap-touchspin bootstrap-touchspin-injected">\n              <span class="input-group-btn input-group-prepend">\n                <button tabindex="-1" class="'.concat(s.buttondown_class,' bootstrap-touchspin-down" type="button">').concat(s.buttondown_txt,'</button>\n              </span>\n              <span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend">\n                <span class="input-group-text">').concat(s.prefix,'</span>\n              </span>\n              <span class="input-group-addon bootstrap-touchspin-postfix input-group-append">\n                <span class="input-group-text">').concat(s.postfix,'</span>\n              </span>\n              <span class="input-group-btn input-group-append">\n                <button tabindex="-1" class="').concat(s.buttonup_class,' bootstrap-touchspin-up" type="button">').concat(s.buttonup_txt,"</button>\n              </span>\n            </div>"),m=t(w).insertBefore(_),t(".bootstrap-touchspin-prefix",m).after(_),_.hasClass("input-sm")||_.hasClass("form-control-sm")?m.addClass("input-group-sm"):(_.hasClass("input-lg")||_.hasClass("form-control-lg"))&&m.addClass("input-group-lg")),u={down:t(".bootstrap-touchspin-down",m),up:t(".bootstrap-touchspin-up",m),input:t("input",m),prefix:t(".bootstrap-touchspin-prefix",m).addClass(s.prefix_extraclass),postfix:t(".bootstrap-touchspin-postfix",m).addClass(s.postfix_extraclass)},P(),j(),"undefined"!=typeof MutationObserver&&new MutationObserver(function(t){t.forEach(function(t){"attributes"!==t.type||"disabled"!==t.attributeName&&"readonly"!==t.attributeName||P()})}).observe(_[0],{attributes:!0}),_.on("keydown.touchspin",function(t){var n=t.keyCode||t.which;38===n?("up"!==F&&(N(),T()),t.preventDefault()):40===n?("down"!==F&&(q(),B()),t.preventDefault()):9!==n&&13!==n||D()}),_.on("keyup.touchspin",function(t){38!==(t=t.keyCode||t.which)&&40!==t||A()}),t(document).on("mousedown touchstart",function(n){t(n.target).is(_)||D()}),_.on("blur.touchspin",function(){D()}),u.down.on("keydown",function(t){var n=t.keyCode||t.which;32!==n&&13!==n||("down"!==F&&(q(),B()),t.preventDefault())}),u.down.on("keyup.touchspin",function(t){32!==(t=t.keyCode||t.which)&&13!==t||A()}),u.up.on("keydown.touchspin",function(t){var n=t.keyCode||t.which;32!==n&&13!==n||("up"!==F&&(N(),T()),t.preventDefault())}),u.up.on("keyup.touchspin",function(t){32!==(t=t.keyCode||t.which)&&13!==t||A()}),u.down.on("mousedown.touchspin",function(t){u.down.off("touchstart.touchspin"),_.is(":disabled,[readonly]")||(q(),B(),t.preventDefault(),t.stopPropagation())}),u.down.on("touchstart.touchspin",function(t){u.down.off("mousedown.touchspin"),_.is(":disabled,[readonly]")||(q(),B(),t.preventDefault(),t.stopPropagation())}),u.up.on("mousedown.touchspin",function(t){u.up.off("touchstart.touchspin"),_.is(":disabled,[readonly]")||(N(),T(),t.preventDefault(),t.stopPropagation())}),u.up.on("touchstart.touchspin",function(t){u.up.off("mousedown.touchspin"),_.is(":disabled,[readonly]")||(N(),T(),t.preventDefault(),t.stopPropagation())}),u.up.on("mouseup.touchspin mouseout.touchspin touchleave.touchspin touchend.touchspin touchcancel.touchspin",function(t){F&&(t.stopPropagation(),A())}),u.down.on("mouseup.touchspin mouseout.touchspin touchleave.touchspin touchend.touchspin touchcancel.touchspin",function(t){F&&(t.stopPropagation(),A())}),u.down.on("mousemove.touchspin touchmove.touchspin",function(t){F&&(t.stopPropagation(),t.preventDefault())}),u.up.on("mousemove.touchspin touchmove.touchspin",function(t){F&&(t.stopPropagation(),t.preventDefault())}),_.on("mousewheel.touchspin DOMMouseScroll.touchspin",function(t){var n;s.mousewheel&&_.is(":focus")&&(n=t.originalEvent.wheelDelta||-t.originalEvent.deltaY||-t.originalEvent.detail,t.stopPropagation(),t.preventDefault(),(n<0?q:N)())}),_.on("touchspin.destroy",function(){var n=_.parent();A(),_.off(".touchspin"),n.hasClass("bootstrap-touchspin-injected")?(_.siblings().remove(),_.unwrap()):(t(".bootstrap-touchspin-injected",n).remove(),n.removeClass("bootstrap-touchspin")),_.data("alreadyinitialized",!1)}),_.on("touchspin.uponce",function(){A(),N()}),_.on("touchspin.downonce",function(){A(),q()}),_.on("touchspin.startupspin",function(){T()}),_.on("touchspin.startdownspin",function(){B()}),_.on("touchspin.stopspin",function(){A()}),_.on("touchspin.updatesettings",function(n,o){var a=o;s=t.extend({},s,a),a.postfix&&(0===_.parent().find(".bootstrap-touchspin-postfix").length&&p.insertAfter(_),_.parent().find(".bootstrap-touchspin-postfix .input-group-text").text(a.postfix)),a.prefix&&(0===_.parent().find(".bootstrap-touchspin-prefix").length&&i.insertBefore(_),_.parent().find(".bootstrap-touchspin-prefix .input-group-text").text(a.prefix)),j(),D(),""!==(o=u.input.val())&&(o=parseFloat(s.callback_before_calculation(u.input.val())),u.input.val(s.callback_after_calculation(parseFloat(o).toFixed(s.decimals))))})):console.log("Must be an input."))})}});