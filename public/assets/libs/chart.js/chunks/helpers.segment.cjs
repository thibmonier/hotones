/*! For license information please see helpers.segment.cjs.LICENSE.txt */
"use strict";var color$1=require("@kurkle/color");function noop(){}const uid=(()=>{let e=0;return()=>e++})();function isNullOrUndef(e){return null==e}function isArray(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function isObject(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function isNumberFinite(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function finiteOrDefault(e,t){return isNumberFinite(e)?e:t}function valueOrDefault(e,t){return void 0===e?t:e}const toPercentage=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t,toDimension=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function callback(e,t,o){if(e&&"function"==typeof e.call)return e.apply(o,t)}function each(e,t,o,n){let r,i,s;if(isArray(e))if(i=e.length,n)for(r=i-1;r>=0;r--)t.call(o,e[r],r);else for(r=0;r<i;r++)t.call(o,e[r],r);else if(isObject(e))for(s=Object.keys(e),i=s.length,r=0;r<i;r++)t.call(o,e[s[r]],s[r])}function _elementsEqual(e,t){let o,n,r,i;if(!e||!t||e.length!==t.length)return!1;for(o=0,n=e.length;o<n;++o)if(r=e[o],i=t[o],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function clone(e){if(isArray(e))return e.map(clone);if(isObject(e)){const t=Object.create(null),o=Object.keys(e),n=o.length;let r=0;for(;r<n;++r)t[o[r]]=clone(e[o[r]]);return t}return e}function isValidKey(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function _merger(e,t,o,n){if(!isValidKey(e))return;const r=t[e],i=o[e];isObject(r)&&isObject(i)?merge(r,i,n):t[e]=clone(i)}function merge(e,t,o){const n=isArray(t)?t:[t],r=n.length;if(!isObject(e))return e;const i=(o=o||{}).merger||_merger;let s;for(let t=0;t<r;++t){if(s=n[t],!isObject(s))continue;const r=Object.keys(s);for(let t=0,n=r.length;t<n;++t)i(r[t],e,s,o)}return e}function mergeIf(e,t){return merge(e,t,{merger:_mergerIf})}function _mergerIf(e,t,o){if(!isValidKey(e))return;const n=t[e],r=o[e];isObject(n)&&isObject(r)?mergeIf(n,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=clone(r))}function _deprecated(e,t,o,n){void 0!==t&&console.warn(e+': "'+o+'" is deprecated. Please use "'+n+'" instead')}const keyResolvers={"":e=>e,x:e=>e.x,y:e=>e.y};function _splitKey(e){const t=e.split("."),o=[];let n="";for(const e of t)n+=e,n.endsWith("\\")?n=n.slice(0,-1)+".":(o.push(n),n="");return o}function _getKeyResolver(e){const t=_splitKey(e);return e=>{for(const o of t){if(""===o)break;e=e&&e[o]}return e}}function resolveObjectKey(e,t){return(keyResolvers[t]||(keyResolvers[t]=_getKeyResolver(t)))(e)}function _capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}const defined=e=>void 0!==e,isFunction=e=>"function"==typeof e,setsEqual=(e,t)=>{if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0};function _isClickEvent(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=2*PI/3,log10=Math.log10,sign=Math.sign;function almostEquals(e,t,o){return Math.abs(e-t)<o}function niceNum(e){const t=Math.round(e);e=almostEquals(e,t,e/1e3)?t:e;const o=Math.pow(10,Math.floor(log10(e))),n=e/o;return(n<=1?1:n<=2?2:n<=5?5:10)*o}function _factorize(e){const t=[],o=Math.sqrt(e);let n;for(n=1;n<o;n++)e%n==0&&(t.push(n),t.push(e/n));return o===(0|o)&&t.push(o),t.sort(((e,t)=>e-t)).pop(),t}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function almostWhole(e,t){const o=Math.round(e);return o-t<=e&&o+t>=e}function _setMinAndMaxByKey(e,t,o){let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n][o],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function toRadians(e){return e*(PI/180)}function toDegrees(e){return e*(180/PI)}function _decimalPlaces(e){if(!isNumberFinite(e))return;let t=1,o=0;for(;Math.round(e*t)/t!==e;)t*=10,o++;return o}function getAngleFromPoint(e,t){const o=t.x-e.x,n=t.y-e.y,r=Math.sqrt(o*o+n*n);let i=Math.atan2(n,o);return i<-.5*PI&&(i+=TAU),{angle:i,distance:r}}function distanceBetweenPoints(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function _angleDiff(e,t){return(e-t+PITAU)%TAU-PI}function _normalizeAngle(e){return(e%TAU+TAU)%TAU}function _angleBetween(e,t,o,n){const r=_normalizeAngle(e),i=_normalizeAngle(t),s=_normalizeAngle(o),a=_normalizeAngle(i-r),l=_normalizeAngle(s-r),c=_normalizeAngle(r-i),u=_normalizeAngle(r-s);return r===i||r===s||n&&i===s||a>l&&c<u}function _limitValue(e,t,o){return Math.max(t,Math.min(o,e))}function _int16Range(e){return _limitValue(e,-32768,32767)}function _isBetween(e,t,o,n=1e-6){return e>=Math.min(t,o)-n&&e<=Math.max(t,o)+n}function _lookup(e,t,o){o=o||(o=>e[o]<t);let n,r=e.length-1,i=0;for(;r-i>1;)n=i+r>>1,o(n)?i=n:r=n;return{lo:i,hi:r}}const _lookupByKey=(e,t,o,n)=>_lookup(e,o,n?n=>{const r=e[n][t];return r<o||r===o&&e[n+1][t]===o}:n=>e[n][t]<o),_rlookupByKey=(e,t,o)=>_lookup(e,o,(n=>e[n][t]>=o));function _filterBetween(e,t,o){let n=0,r=e.length;for(;n<r&&e[n]<t;)n++;for(;r>n&&e[r-1]>o;)r--;return n>0||r<e.length?e.slice(n,r):e}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),arrayEvents.forEach((t=>{const o="_onData"+_capitalize(t),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...t){const r=n.apply(this,t);return e._chartjs.listeners.forEach((e=>{"function"==typeof e[o]&&e[o](...t)})),r}})})))}function unlistenArrayEvents(e,t){const o=e._chartjs;if(!o)return;const n=o.listeners,r=n.indexOf(t);-1!==r&&n.splice(r,1),n.length>0||(arrayEvents.forEach((t=>{delete e[t]})),delete e._chartjs)}function _arrayUnique(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}function fontString(e,t,o){return t+" "+e+"px "+o}const requestAnimFrame="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function throttled(e,t){let o=[],n=!1;return function(...r){o=r,n||(n=!0,requestAnimFrame.call(window,(()=>{n=!1,e.apply(t,o)})))}}function debounce(e,t){let o;return function(...n){return t?(clearTimeout(o),o=setTimeout(e,t,n)):e.apply(this,n),t}}const _toLeftRightCenter=e=>"start"===e?"left":"end"===e?"right":"center",_alignStartEnd=(e,t,o)=>"start"===e?t:"end"===e?o:(t+o)/2,_textX=(e,t,o,n)=>e===(n?"left":"right")?o:"center"===e?(t+o)/2:t;function _getStartAndCountOfVisiblePoints(e,t,o){const n=t.length;let r=0,i=n;if(e._sorted){const{iScale:s,_parsed:a}=e,l=s.axis,{min:c,max:u,minDefined:p,maxDefined:d}=s.getUserBounds();p&&(r=_limitValue(Math.min(_lookupByKey(a,l,c).lo,o?n:_lookupByKey(t,l,s.getPixelForValue(c)).lo),0,n-1)),i=d?_limitValue(Math.max(_lookupByKey(a,s.axis,u,!0).hi+1,o?0:_lookupByKey(t,l,s.getPixelForValue(u),!0).hi+1),r,n)-r:n-r}return{start:r,count:i}}function _scaleRangesChanged(e){const{xScale:t,yScale:o,_scaleRanges:n}=e,r={xmin:t.min,xmax:t.max,ymin:o.min,ymax:o.max};if(!n)return e._scaleRanges=r,!0;const i=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==o.min||n.ymax!==o.max;return Object.assign(n,r),i}const atEdge=e=>0===e||1===e,elasticIn=(e,t,o)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*TAU/o),elasticOut=(e,t,o)=>Math.pow(2,-10*e)*Math.sin((e-t)*TAU/o)+1,effects={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*HALF_PI),easeOutSine:e=>Math.sin(e*HALF_PI),easeInOutSine:e=>-.5*(Math.cos(PI*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>atEdge(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>atEdge(e)?e:elasticIn(e,.075,.3),easeOutElastic:e=>atEdge(e)?e:elasticOut(e,.075,.3),easeInOutElastic(e){const t=.1125;return atEdge(e)?e:e<.5?.5*elasticIn(2*e,t,.45):.5+.5*elasticOut(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-effects.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,o=2.75;return e<1/o?t*e*e:e<2/o?t*(e-=1.5/o)*e+.75:e<2.5/o?t*(e-=2.25/o)*e+.9375:t*(e-=2.625/o)*e+.984375},easeInOutBounce:e=>e<.5?.5*effects.easeInBounce(2*e):.5*effects.easeOutBounce(2*e-1)+.5};function isPatternOrGradient(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function color(e){return isPatternOrGradient(e)?e:new color$1.Color(e)}function getHoverColor(e){return isPatternOrGradient(e)?e:new color$1.Color(e).saturate(.5).darken(.1).hexString()}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];function applyAnimationsDefaults(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})}function applyLayoutsDefaults(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const intlCache=new Map;function getNumberFormat(e,t){t=t||{};const o=e+JSON.stringify(t);let n=intlCache.get(o);return n||(n=new Intl.NumberFormat(e,t),intlCache.set(o,n)),n}function formatNumber(e,t,o){return getNumberFormat(t,o).format(e)}const formatters={values:e=>isArray(e)?e:""+e,numeric(e,t,o){if(0===e)return"0";const n=this.chart.options.locale;let r,i=e;if(o.length>1){const t=Math.max(Math.abs(o[0].value),Math.abs(o[o.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),i=calculateDelta(e,o)}const s=log10(Math.abs(i)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),formatNumber(e,n,l)},logarithmic(e,t,o){if(0===e)return"0";const n=o[t].significand||e/Math.pow(10,Math.floor(log10(e)));return[1,2,3,5,10,15].includes(n)||t>.8*o.length?formatters.numeric.call(this,e,t,o):""}};function calculateDelta(e,t){let o=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(o)>=1&&e!==Math.floor(e)&&(o=e-Math.floor(e)),o}var Ticks={formatters};function applyScaleDefaults(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(e,t){if(!t)return e;const o=t.split(".");for(let t=0,n=o.length;t<n;++t){const n=o[t];e=e[n]||(e[n]=Object.create(null))}return e}function set(e,t,o){return"string"==typeof t?merge(getScope$1(e,t),o):merge(getScope$1(e,""),t)}class Defaults{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>getHoverColor(t.backgroundColor),this.hoverBorderColor=(e,t)=>getHoverColor(t.borderColor),this.hoverColor=(e,t)=>getHoverColor(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return set(this,e,t)}get(e){return getScope$1(this,e)}describe(e,t){return set(descriptors,e,t)}override(e,t){return set(overrides,e,t)}route(e,t,o,n){const r=getScope$1(this,e),i=getScope$1(this,o),s="_"+t;Object.defineProperties(r,{[s]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[s],t=i[n];return isObject(e)?Object.assign({},t,e):valueOrDefault(e,t)},set(e){this[s]=e}}})}apply(e){e.forEach((e=>e(this)))}}var defaults=new Defaults({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[applyAnimationsDefaults,applyLayoutsDefaults,applyScaleDefaults]);function toFontString(e){return!e||isNullOrUndef(e.size)||isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function _measureText(e,t,o,n,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,o.push(r)),i>n&&(n=i),n}function _longestText(e,t,o,n){let r=(n=n||{}).data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},i=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let s=0;const a=o.length;let l,c,u,p,d;for(l=0;l<a;l++)if(p=o[l],null==p||isArray(p)){if(isArray(p))for(c=0,u=p.length;c<u;c++)d=p[c],null==d||isArray(d)||(s=_measureText(e,r,i,s,d))}else s=_measureText(e,r,i,s,p);e.restore();const f=i.length/2;if(f>o.length){for(l=0;l<f;l++)delete r[i[l]];i.splice(0,f)}return s}function _alignPixel(e,t,o){const n=e.currentDevicePixelRatio,r=0!==o?Math.max(o/2,.5):0;return Math.round((t-r)*n)/n+r}function clearCanvas(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function drawPoint(e,t,o,n){drawPointLegend(e,t,o,n,null)}function drawPointLegend(e,t,o,n,r){let i,s,a,l,c,u,p,d;const f=t.pointStyle,h=t.rotation,g=t.radius;let x=(h||0)*RAD_PER_DEG;if(f&&"object"==typeof f&&(i=f.toString(),"[object HTMLImageElement]"===i||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(o,n),e.rotate(x),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:r?e.ellipse(o,n,r/2,g,0,0,TAU):e.arc(o,n,g,0,TAU),e.closePath();break;case"triangle":u=r?r/2:g,e.moveTo(o+Math.sin(x)*u,n-Math.cos(x)*g),x+=TWO_THIRDS_PI,e.lineTo(o+Math.sin(x)*u,n-Math.cos(x)*g),x+=TWO_THIRDS_PI,e.lineTo(o+Math.sin(x)*u,n-Math.cos(x)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,s=Math.cos(x+QUARTER_PI)*l,p=Math.cos(x+QUARTER_PI)*(r?r/2-c:l),a=Math.sin(x+QUARTER_PI)*l,d=Math.sin(x+QUARTER_PI)*(r?r/2-c:l),e.arc(o-p,n-a,c,x-PI,x-HALF_PI),e.arc(o+d,n-s,c,x-HALF_PI,x),e.arc(o+p,n+a,c,x,x+HALF_PI),e.arc(o-d,n+s,c,x+HALF_PI,x+PI),e.closePath();break;case"rect":if(!h){l=Math.SQRT1_2*g,u=r?r/2:l,e.rect(o-u,n-l,2*u,2*l);break}x+=QUARTER_PI;case"rectRot":p=Math.cos(x)*(r?r/2:g),s=Math.cos(x)*g,a=Math.sin(x)*g,d=Math.sin(x)*(r?r/2:g),e.moveTo(o-p,n-a),e.lineTo(o+d,n-s),e.lineTo(o+p,n+a),e.lineTo(o-d,n+s),e.closePath();break;case"crossRot":x+=QUARTER_PI;case"cross":p=Math.cos(x)*(r?r/2:g),s=Math.cos(x)*g,a=Math.sin(x)*g,d=Math.sin(x)*(r?r/2:g),e.moveTo(o-p,n-a),e.lineTo(o+p,n+a),e.moveTo(o+d,n-s),e.lineTo(o-d,n+s);break;case"star":p=Math.cos(x)*(r?r/2:g),s=Math.cos(x)*g,a=Math.sin(x)*g,d=Math.sin(x)*(r?r/2:g),e.moveTo(o-p,n-a),e.lineTo(o+p,n+a),e.moveTo(o+d,n-s),e.lineTo(o-d,n+s),x+=QUARTER_PI,p=Math.cos(x)*(r?r/2:g),s=Math.cos(x)*g,a=Math.sin(x)*g,d=Math.sin(x)*(r?r/2:g),e.moveTo(o-p,n-a),e.lineTo(o+p,n+a),e.moveTo(o+d,n-s),e.lineTo(o-d,n+s);break;case"line":s=r?r/2:Math.cos(x)*g,a=Math.sin(x)*g,e.moveTo(o-s,n-a),e.lineTo(o+s,n+a);break;case"dash":e.moveTo(o,n),e.lineTo(o+Math.cos(x)*(r?r/2:g),n+Math.sin(x)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function _isPointInArea(e,t,o){return o=o||.5,!t||e&&e.x>t.left-o&&e.x<t.right+o&&e.y>t.top-o&&e.y<t.bottom+o}function clipArea(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function unclipArea(e){e.restore()}function _steppedLineTo(e,t,o,n,r){if(!t)return e.lineTo(o.x,o.y);if("middle"===r){const n=(t.x+o.x)/2;e.lineTo(n,t.y),e.lineTo(n,o.y)}else"after"===r!=!!n?e.lineTo(t.x,o.y):e.lineTo(o.x,t.y);e.lineTo(o.x,o.y)}function _bezierCurveTo(e,t,o,n){if(!t)return e.lineTo(o.x,o.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?o.cp2x:o.cp1x,n?o.cp2y:o.cp1y,o.x,o.y)}function setRenderOpts(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),isNullOrUndef(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function decorateText(e,t,o,n,r){if(r.strikethrough||r.underline){const i=e.measureText(n),s=t-i.actualBoundingBoxLeft,a=t+i.actualBoundingBoxRight,l=o-i.actualBoundingBoxAscent,c=o+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(s,u),e.lineTo(a,u),e.stroke()}}function drawBackdrop(e,t){const o=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=o}function renderText(e,t,o,n,r,i={}){const s=isArray(t)?t:[t],a=i.strokeWidth>0&&""!==i.strokeColor;let l,c;for(e.save(),e.font=r.string,setRenderOpts(e,i),l=0;l<s.length;++l)c=s[l],i.backdrop&&drawBackdrop(e,i.backdrop),a&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),isNullOrUndef(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,o,n,i.maxWidth)),e.fillText(c,o,n,i.maxWidth),decorateText(e,o,n,c,i),n+=Number(r.lineHeight);e.restore()}function addRoundedRectPath(e,t){const{x:o,y:n,w:r,h:i,radius:s}=t;e.arc(o+s.topLeft,n+s.topLeft,s.topLeft,1.5*PI,PI,!0),e.lineTo(o,n+i-s.bottomLeft),e.arc(o+s.bottomLeft,n+i-s.bottomLeft,s.bottomLeft,PI,HALF_PI,!0),e.lineTo(o+r-s.bottomRight,n+i),e.arc(o+r-s.bottomRight,n+i-s.bottomRight,s.bottomRight,HALF_PI,0,!0),e.lineTo(o+r,n+s.topRight),e.arc(o+r-s.topRight,n+s.topRight,s.topRight,0,-HALF_PI,!0),e.lineTo(o+s.topLeft,n)}const LINE_HEIGHT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FONT_STYLE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function toLineHeight(e,t){const o=(""+e).match(LINE_HEIGHT);if(!o||"normal"===o[1])return 1.2*t;switch(e=+o[2],o[3]){case"px":return e;case"%":e/=100}return t*e}const numberOrZero=e=>+e||0;function _readValueToProps(e,t){const o={},n=isObject(t),r=n?Object.keys(t):t,i=isObject(e)?n?o=>valueOrDefault(e[o],e[t[o]]):t=>e[t]:()=>e;for(const e of r)o[e]=numberOrZero(i(e));return o}function toTRBL(e){return _readValueToProps(e,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(e){return _readValueToProps(e,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(e){const t=toTRBL(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function toFont(e,t){e=e||{},t=t||defaults.font;let o=valueOrDefault(e.size,t.size);"string"==typeof o&&(o=parseInt(o,10));let n=valueOrDefault(e.style,t.style);n&&!(""+n).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:valueOrDefault(e.family,t.family),lineHeight:toLineHeight(valueOrDefault(e.lineHeight,t.lineHeight),o),size:o,style:n,weight:valueOrDefault(e.weight,t.weight),string:""};return r.string=toFontString(r),r}function resolve(e,t,o,n){let r,i,s,a=!0;for(r=0,i=e.length;r<i;++r)if(s=e[r],void 0!==s&&(void 0!==t&&"function"==typeof s&&(s=s(t),a=!1),void 0!==o&&isArray(s)&&(s=s[o%s.length],a=!1),void 0!==s))return n&&!a&&(n.cacheable=!1),s}function _addGrace(e,t,o){const{min:n,max:r}=e,i=toDimension(t,(r-n)/2),s=(e,t)=>o&&0===e?0:e+t;return{min:s(n,-Math.abs(i)),max:s(r,i)}}function createContext(e,t){return Object.assign(Object.create(e),t)}function _createResolver(e,t=[""],o,n,r=(()=>e[0])){const i=o||e;void 0===n&&(n=_resolve("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:o=>_createResolver([o,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,o)=>(delete t[o],delete t._keys,delete e[0][o],!0),get:(o,n)=>_cached(o,n,(()=>_resolveWithPrefixes(n,t,e,o))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>getKeysFromAllScopes(e).includes(t),ownKeys:e=>getKeysFromAllScopes(e),set(e,t,o){const n=e._storage||(e._storage=r());return e[t]=n[t]=o,delete e._keys,!0}})}function _attachContext(e,t,o,n){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:o,_stack:new Set,_descriptors:_descriptors(e,n),setContext:t=>_attachContext(e,t,o,n),override:r=>_attachContext(e.override(r),t,o,n)};return new Proxy(r,{deleteProperty:(t,o)=>(delete t[o],delete e[o],!0),get:(e,t,o)=>_cached(e,t,(()=>_resolveWithContext(e,t,o))),getOwnPropertyDescriptor:(t,o)=>t._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,o)=>Reflect.has(e,o),ownKeys:()=>Reflect.ownKeys(e),set:(t,o,n)=>(e[o]=n,delete t[o],!0)})}function _descriptors(e,t={scriptable:!0,indexable:!0}){const{_scriptable:o=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:o,indexable:n,isScriptable:isFunction(o)?o:()=>o,isIndexable:isFunction(n)?n:()=>n}}const readKey=(e,t)=>e?e+_capitalize(t):t,needsSubResolver=(e,t)=>isObject(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function _cached(e,t,o){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const n=o();return e[t]=n,n}function _resolveWithContext(e,t,o){const{_proxy:n,_context:r,_subProxy:i,_descriptors:s}=e;let a=n[t];return isFunction(a)&&s.isScriptable(t)&&(a=_resolveScriptable(t,a,e,o)),isArray(a)&&a.length&&(a=_resolveArray(t,a,e,s.isIndexable)),needsSubResolver(t,a)&&(a=_attachContext(a,r,i&&i[t],s)),a}function _resolveScriptable(e,t,o,n){const{_proxy:r,_context:i,_subProxy:s,_stack:a}=o;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(i,s||n);return a.delete(e),needsSubResolver(e,l)&&(l=createSubResolver(r._scopes,r,e,l)),l}function _resolveArray(e,t,o,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=o;if(void 0!==i.index&&n(e))return t[i.index%t.length];if(isObject(t[0])){const o=t,n=r._scopes.filter((e=>e!==o));t=[];for(const l of o){const o=createSubResolver(n,r,e,l);t.push(_attachContext(o,i,s&&s[e],a))}}return t}function resolveFallback(e,t,o){return isFunction(e)?e(t,o):e}const getScope=(e,t)=>!0===e?t:"string"==typeof e?resolveObjectKey(t,e):void 0;function addScopes(e,t,o,n,r){for(const i of t){const t=getScope(o,i);if(t){e.add(t);const i=resolveFallback(t._fallback,o,r);if(void 0!==i&&i!==o&&i!==n)return i}else if(!1===t&&void 0!==n&&o!==n)return null}return!1}function createSubResolver(e,t,o,n){const r=t._rootScopes,i=resolveFallback(t._fallback,o,n),s=[...e,...r],a=new Set;a.add(n);let l=addScopesFromKey(a,s,o,i||o,n);return null!==l&&((void 0===i||i===o||(l=addScopesFromKey(a,s,i,l,n),null!==l))&&_createResolver(Array.from(a),[""],r,i,(()=>subGetTarget(t,o,n))))}function addScopesFromKey(e,t,o,n,r){for(;o;)o=addScopes(e,t,o,n,r);return o}function subGetTarget(e,t,o){const n=e._getTarget();t in n||(n[t]={});const r=n[t];return isArray(r)&&isObject(o)?o:r||{}}function _resolveWithPrefixes(e,t,o,n){let r;for(const i of t)if(r=_resolve(readKey(i,e),o),void 0!==r)return needsSubResolver(e,r)?createSubResolver(o,n,e,r):r}function _resolve(e,t){for(const o of t){if(!o)continue;const t=o[e];if(void 0!==t)return t}}function getKeysFromAllScopes(e){let t=e._keys;return t||(t=e._keys=resolveKeysFromAllScopes(e._scopes)),t}function resolveKeysFromAllScopes(e){const t=new Set;for(const o of e)for(const e of Object.keys(o).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}function _parseObjectDataRadialScale(e,t,o,n){const{iScale:r}=e,{key:i="r"}=this._parsing,s=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+o,u=t[c],s[a]={r:r.parse(resolveObjectKey(u,i),c)};return s}const EPSILON=Number.EPSILON||1e-14,getPoint=(e,t)=>t<e.length&&!e[t].skip&&e[t],getValueAxis=e=>"x"===e?"y":"x";function splineCurve(e,t,o,n){const r=e.skip?t:e,i=t,s=o.skip?t:o,a=distanceBetweenPoints(i,r),l=distanceBetweenPoints(s,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const p=n*c,d=n*u;return{previous:{x:i.x-p*(s.x-r.x),y:i.y-p*(s.y-r.y)},next:{x:i.x+d*(s.x-r.x),y:i.y+d*(s.y-r.y)}}}function monotoneAdjust(e,t,o){const n=e.length;let r,i,s,a,l,c=getPoint(e,0);for(let u=0;u<n-1;++u)l=c,c=getPoint(e,u+1),l&&c&&(almostEquals(t[u],0,EPSILON)?o[u]=o[u+1]=0:(r=o[u]/t[u],i=o[u+1]/t[u],a=Math.pow(r,2)+Math.pow(i,2),a<=9||(s=3/Math.sqrt(a),o[u]=r*s*t[u],o[u+1]=i*s*t[u])))}function monotoneCompute(e,t,o="x"){const n=getValueAxis(o),r=e.length;let i,s,a,l=getPoint(e,0);for(let c=0;c<r;++c){if(s=a,a=l,l=getPoint(e,c+1),!a)continue;const r=a[o],u=a[n];s&&(i=(r-s[o])/3,a[`cp1${o}`]=r-i,a[`cp1${n}`]=u-i*t[c]),l&&(i=(l[o]-r)/3,a[`cp2${o}`]=r+i,a[`cp2${n}`]=u+i*t[c])}}function splineCurveMonotone(e,t="x"){const o=getValueAxis(t),n=e.length,r=Array(n).fill(0),i=Array(n);let s,a,l,c=getPoint(e,0);for(s=0;s<n;++s)if(a=l,l=c,c=getPoint(e,s+1),l){if(c){const e=c[t]-l[t];r[s]=0!==e?(c[o]-l[o])/e:0}i[s]=a?c?sign(r[s-1])!==sign(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}monotoneAdjust(e,r,i),monotoneCompute(e,i,t)}function capControlPoint(e,t,o){return Math.max(Math.min(e,o),t)}function capBezierPoints(e,t){let o,n,r,i,s,a=_isPointInArea(e[0],t);for(o=0,n=e.length;o<n;++o)s=i,i=a,a=o<n-1&&_isPointInArea(e[o+1],t),i&&(r=e[o],s&&(r.cp1x=capControlPoint(r.cp1x,t.left,t.right),r.cp1y=capControlPoint(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=capControlPoint(r.cp2x,t.left,t.right),r.cp2y=capControlPoint(r.cp2y,t.top,t.bottom)))}function _updateBezierControlPoints(e,t,o,n,r){let i,s,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)splineCurveMonotone(e,r);else{let o=n?e[e.length-1]:e[0];for(i=0,s=e.length;i<s;++i)a=e[i],l=splineCurve(o,a,e[Math.min(i+1,s-(n?0:1))%s],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,o=a}t.capBezierPoints&&capBezierPoints(e,o)}function _isDomSupported(){return"undefined"!=typeof window&&"undefined"!=typeof document}function _getParentNode(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function parseMaxStyle(e,t,o){let n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[o])):n=e,n}const getComputedStyle=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function getStyle(e,t){return getComputedStyle(e).getPropertyValue(t)}const positions=["top","right","bottom","left"];function getPositionedStyle(e,t,o){const n={};o=o?"-"+o:"";for(let r=0;r<4;r++){const i=positions[r];n[i]=parseFloat(e[t+"-"+i+o])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const useOffsetPos=(e,t,o)=>(e>0||t>0)&&(!o||!o.shadowRoot);function getCanvasPosition(e,t){const o=e.touches,n=o&&o.length?o[0]:e,{offsetX:r,offsetY:i}=n;let s,a,l=!1;if(useOffsetPos(r,i,e.target))s=r,a=i;else{const e=t.getBoundingClientRect();s=n.clientX-e.left,a=n.clientY-e.top,l=!0}return{x:s,y:a,box:l}}function getRelativePosition(e,t){if("native"in e)return e;const{canvas:o,currentDevicePixelRatio:n}=t,r=getComputedStyle(o),i="border-box"===r.boxSizing,s=getPositionedStyle(r,"padding"),a=getPositionedStyle(r,"border","width"),{x:l,y:c,box:u}=getCanvasPosition(e,o),p=s.left+(u&&a.left),d=s.top+(u&&a.top);let{width:f,height:h}=t;return i&&(f-=s.width+a.width,h-=s.height+a.height),{x:Math.round((l-p)/f*o.width/n),y:Math.round((c-d)/h*o.height/n)}}function getContainerSize(e,t,o){let n,r;if(void 0===t||void 0===o){const i=e&&_getParentNode(e);if(i){const e=i.getBoundingClientRect(),s=getComputedStyle(i),a=getPositionedStyle(s,"border","width"),l=getPositionedStyle(s,"padding");t=e.width-l.width-a.width,o=e.height-l.height-a.height,n=parseMaxStyle(s.maxWidth,i,"clientWidth"),r=parseMaxStyle(s.maxHeight,i,"clientHeight")}else t=e.clientWidth,o=e.clientHeight}return{width:t,height:o,maxWidth:n||INFINITY,maxHeight:r||INFINITY}}const round1=e=>Math.round(10*e)/10;function getMaximumSize(e,t,o,n){const r=getComputedStyle(e),i=getPositionedStyle(r,"margin"),s=parseMaxStyle(r.maxWidth,e,"clientWidth")||INFINITY,a=parseMaxStyle(r.maxHeight,e,"clientHeight")||INFINITY,l=getContainerSize(e,t,o);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=getPositionedStyle(r,"border","width"),t=getPositionedStyle(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-i.width),u=Math.max(0,n?c/n:u-i.height),c=round1(Math.min(c,s,l.maxWidth)),u=round1(Math.min(u,a,l.maxHeight)),c&&!u&&(u=round1(c/2));return(void 0!==t||void 0!==o)&&n&&l.height&&u>l.height&&(u=l.height,c=round1(Math.floor(u*n))),{width:c,height:u}}function retinaScale(e,t,o){const n=t||1,r=Math.floor(e.height*n),i=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(o||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==n||s.height!==r||s.width!==i)&&(e.currentDevicePixelRatio=n,s.height=r,s.width=i,e.ctx.setTransform(n,0,0,n,0,0),!0)}const supportsEventListenerOptions=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};_isDomSupported()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(e){}return e}();function readUsedSize(e,t){const o=getStyle(e,t),n=o&&o.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function _pointInLine(e,t,o,n){return{x:e.x+o*(t.x-e.x),y:e.y+o*(t.y-e.y)}}function _steppedInterpolation(e,t,o,n){return{x:e.x+o*(t.x-e.x),y:"middle"===n?o<.5?e.y:t.y:"after"===n?o<1?e.y:t.y:o>0?t.y:e.y}}function _bezierInterpolation(e,t,o,n){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},s=_pointInLine(e,r,o),a=_pointInLine(r,i,o),l=_pointInLine(i,t,o),c=_pointInLine(s,a,o),u=_pointInLine(a,l,o);return _pointInLine(c,u,o)}const getRightToLeftAdapter=function(e,t){return{x:o=>e+e+t-o,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}},getLeftToRightAdapter=function(){return{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}};function getRtlAdapter(e,t,o){return e?getRightToLeftAdapter(t,o):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function overrideTextDirection(e,t){let o,n;"ltr"!==t&&"rtl"!==t||(o=e.canvas.style,n=[o.getPropertyValue("direction"),o.getPropertyPriority("direction")],o.setProperty("direction",t,"important"),e.prevTextDirection=n)}function restoreTextDirection(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function propertyFn(e){return"angle"===e?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(e,t)=>e-t,normalize:e=>e}}function normalizeSegment({start:e,end:t,count:o,loop:n,style:r}){return{start:e%o,end:t%o,loop:n&&(t-e+1)%o==0,style:r}}function getSegment(e,t,o){const{property:n,start:r,end:i}=o,{between:s,normalize:a}=propertyFn(n),l=t.length;let c,u,{start:p,end:d,loop:f}=e;if(f){for(p+=l,d+=l,c=0,u=l;c<u&&s(a(t[p%l][n]),r,i);++c)p--,d--;p%=l,d%=l}return d<p&&(d+=l),{start:p,end:d,loop:f,style:e.style}}function _boundSegment(e,t,o){if(!o)return[e];const{property:n,start:r,end:i}=o,s=t.length,{compare:a,between:l,normalize:c}=propertyFn(n),{start:u,end:p,loop:d,style:f}=getSegment(e,t,o),h=[];let g,x,m,y=!1,_=null;const b=()=>y||l(r,m,g)&&0!==a(r,m),v=()=>!y||0===a(i,g)||l(i,m,g);for(let e=u,o=u;e<=p;++e)x=t[e%s],x.skip||(g=c(x[n]),g!==m&&(y=l(g,r,i),null===_&&b()&&(_=0===a(g,r)?e:o),null!==_&&v()&&(h.push(normalizeSegment({start:_,end:e,loop:d,count:s,style:f})),_=null),o=e,m=g));return null!==_&&h.push(normalizeSegment({start:_,end:p,loop:d,count:s,style:f})),h}function _boundSegments(e,t){const o=[],n=e.segments;for(let r=0;r<n.length;r++){const i=_boundSegment(n[r],e.points,t);i.length&&o.push(...i)}return o}function findStartAndEnd(e,t,o,n){let r=0,i=t-1;if(o&&!n)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,o&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function solidSegments(e,t,o,n){const r=e.length,i=[];let s,a=t,l=e[t];for(s=t+1;s<=o;++s){const o=e[s%r];o.skip||o.stop?l.skip||(n=!1,i.push({start:t%r,end:(s-1)%r,loop:n}),t=a=o.stop?s:null):(a=s,l.skip&&(t=s)),l=o}return null!==a&&i.push({start:t%r,end:a%r,loop:n}),i}function _computeSegments(e,t){const o=e.points,n=e.options.spanGaps,r=o.length;if(!r)return[];const i=!!e._loop,{start:s,end:a}=findStartAndEnd(o,r,i,n);if(!0===n)return splitByStyles(e,[{start:s,end:a,loop:i}],o,t);return splitByStyles(e,solidSegments(o,s,a<s?a+r:a,!!e._fullLoop&&0===s&&a===r-1),o,t)}function splitByStyles(e,t,o,n){return n&&n.setContext&&o?doSplitByStyles(e,t,o,n):t}function doSplitByStyles(e,t,o,n){const r=e._chart.getContext(),i=readStyle(e.options),{_datasetIndex:s,options:{spanGaps:a}}=e,l=o.length,c=[];let u=i,p=t[0].start,d=p;function f(e,t,n,r){const i=a?-1:1;if(e!==t){for(e+=l;o[e%l].skip;)e-=i;for(;o[t%l].skip;)t+=i;e%l!=t%l&&(c.push({start:e%l,end:t%l,loop:n,style:r}),u=r,p=t%l)}}for(const e of t){p=a?p:e.start;let t,i=o[p%l];for(d=p+1;d<=e.end;d++){const a=o[d%l];t=readStyle(n.setContext(createContext(r,{type:"segment",p0:i,p1:a,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:s}))),styleChanged(t,u)&&f(p,d-1,e.loop,u),i=a,u=t}p<d-1&&f(p,d-1,e.loop,u)}return c}function readStyle(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function styleChanged(e,t){if(!t)return!1;const o=[],n=function(e,t){return isPatternOrGradient(t)?(o.includes(t)||o.push(t),o.indexOf(t)):t};return JSON.stringify(e,n)!==JSON.stringify(t,n)}exports.HALF_PI=HALF_PI,exports.INFINITY=INFINITY,exports.PI=PI,exports.PITAU=PITAU,exports.QUARTER_PI=QUARTER_PI,exports.RAD_PER_DEG=RAD_PER_DEG,exports.TAU=TAU,exports.TWO_THIRDS_PI=TWO_THIRDS_PI,exports.Ticks=Ticks,exports._addGrace=_addGrace,exports._alignPixel=_alignPixel,exports._alignStartEnd=_alignStartEnd,exports._angleBetween=_angleBetween,exports._angleDiff=_angleDiff,exports._arrayUnique=_arrayUnique,exports._attachContext=_attachContext,exports._bezierCurveTo=_bezierCurveTo,exports._bezierInterpolation=_bezierInterpolation,exports._boundSegment=_boundSegment,exports._boundSegments=_boundSegments,exports._capitalize=_capitalize,exports._computeSegments=_computeSegments,exports._createResolver=_createResolver,exports._decimalPlaces=_decimalPlaces,exports._deprecated=_deprecated,exports._descriptors=_descriptors,exports._elementsEqual=_elementsEqual,exports._factorize=_factorize,exports._filterBetween=_filterBetween,exports._getParentNode=_getParentNode,exports._getStartAndCountOfVisiblePoints=_getStartAndCountOfVisiblePoints,exports._int16Range=_int16Range,exports._isBetween=_isBetween,exports._isClickEvent=_isClickEvent,exports._isDomSupported=_isDomSupported,exports._isPointInArea=_isPointInArea,exports._limitValue=_limitValue,exports._longestText=_longestText,exports._lookup=_lookup,exports._lookupByKey=_lookupByKey,exports._measureText=_measureText,exports._merger=_merger,exports._mergerIf=_mergerIf,exports._normalizeAngle=_normalizeAngle,exports._parseObjectDataRadialScale=_parseObjectDataRadialScale,exports._pointInLine=_pointInLine,exports._readValueToProps=_readValueToProps,exports._rlookupByKey=_rlookupByKey,exports._scaleRangesChanged=_scaleRangesChanged,exports._setMinAndMaxByKey=_setMinAndMaxByKey,exports._splitKey=_splitKey,exports._steppedInterpolation=_steppedInterpolation,exports._steppedLineTo=_steppedLineTo,exports._textX=_textX,exports._toLeftRightCenter=_toLeftRightCenter,exports._updateBezierControlPoints=_updateBezierControlPoints,exports.addRoundedRectPath=addRoundedRectPath,exports.almostEquals=almostEquals,exports.almostWhole=almostWhole,exports.callback=callback,exports.clearCanvas=clearCanvas,exports.clipArea=clipArea,exports.clone=clone,exports.color=color,exports.createContext=createContext,exports.debounce=debounce,exports.defaults=defaults,exports.defined=defined,exports.descriptors=descriptors,exports.distanceBetweenPoints=distanceBetweenPoints,exports.drawPoint=drawPoint,exports.drawPointLegend=drawPointLegend,exports.each=each,exports.effects=effects,exports.finiteOrDefault=finiteOrDefault,exports.fontString=fontString,exports.formatNumber=formatNumber,exports.getAngleFromPoint=getAngleFromPoint,exports.getHoverColor=getHoverColor,exports.getMaximumSize=getMaximumSize,exports.getRelativePosition=getRelativePosition,exports.getRtlAdapter=getRtlAdapter,exports.getStyle=getStyle,exports.isArray=isArray,exports.isFunction=isFunction,exports.isNullOrUndef=isNullOrUndef,exports.isNumber=isNumber,exports.isNumberFinite=isNumberFinite,exports.isObject=isObject,exports.isPatternOrGradient=isPatternOrGradient,exports.listenArrayEvents=listenArrayEvents,exports.log10=log10,exports.merge=merge,exports.mergeIf=mergeIf,exports.niceNum=niceNum,exports.noop=noop,exports.overrideTextDirection=overrideTextDirection,exports.overrides=overrides,exports.readUsedSize=readUsedSize,exports.renderText=renderText,exports.requestAnimFrame=requestAnimFrame,exports.resolve=resolve,exports.resolveObjectKey=resolveObjectKey,exports.restoreTextDirection=restoreTextDirection,exports.retinaScale=retinaScale,exports.setsEqual=setsEqual,exports.sign=sign,exports.splineCurve=splineCurve,exports.splineCurveMonotone=splineCurveMonotone,exports.supportsEventListenerOptions=supportsEventListenerOptions,exports.throttled=throttled,exports.toDegrees=toDegrees,exports.toDimension=toDimension,exports.toFont=toFont,exports.toFontString=toFontString,exports.toLineHeight=toLineHeight,exports.toPadding=toPadding,exports.toPercentage=toPercentage,exports.toRadians=toRadians,exports.toTRBL=toTRBL,exports.toTRBLCorners=toTRBLCorners,exports.uid=uid,exports.unclipArea=unclipArea,exports.unlistenArrayEvents=unlistenArrayEvents,exports.valueOrDefault=valueOrDefault;