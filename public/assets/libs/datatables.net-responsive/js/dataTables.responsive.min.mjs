/*! For license information please see dataTables.responsive.min.mjs.LICENSE.txt */
import e from"jquery";import t from"datatables.net";let n=e;var i=function(e,r){if(!t.versionCheck||!t.versionCheck("1.10.10"))throw"DataTables Responsive requires DataTables 1.10.10 or newer";this.s={childNodeStore:{},columns:[],current:[],dt:new t.Api(e)},this.s.dt.settings()[0].responsive||(r&&"string"==typeof r.details?r.details={type:r.details}:r&&!1===r.details?r.details={type:!1}:r&&!0===r.details&&(r.details={type:"inline"}),this.c=n.extend(!0,{},i.defaults,t.defaults.responsive,r),(e.responsive=this)._constructor())},r=(n.extend(i.prototype,{_constructor:function(){var e=this,i=this.s.dt,r=i.settings()[0],s=n(window).innerWidth();!1!==(r=(i.settings()[0]._responsive=this,n(window).on("resize.dtr orientationchange.dtr",t.util.throttle((function(){var t=n(window).innerWidth();t!==s&&(e._resize(),s=t)}))),r.oApi._fnCallbackReg(r,"aoRowCreatedCallback",(function(t,r,s){-1!==n.inArray(!1,e.s.current)&&n(">td, >th",t).each((function(t){t=i.column.index("toData",t),!1===e.s.current[t]&&n(this).css("display","none")}))})),i.on("destroy.dtr",(function(){i.off(".dtr"),n(i.table().body()).off(".dtr"),n(window).off("resize.dtr orientationchange.dtr"),i.cells(".dtr-control").nodes().to$().removeClass("dtr-control"),n.each(e.s.current,(function(t,n){!1===n&&e._setColumnVis(t,!0)}))})),this.c.breakpoints.sort((function(e,t){return e.width<t.width?1:e.width>t.width?-1:0})),this._classLogic(),this._resizeAuto(),this.c.details)).type&&(e._detailsInit(),i.on("column-visibility.dtr",(function(){e._timer&&clearTimeout(e._timer),e._timer=setTimeout((function(){e._timer=null,e._classLogic(),e._resizeAuto(),e._resize(!0),e._redrawChildren()}),100)})),i.on("draw.dtr",(function(){e._redrawChildren()})),n(i.table().node()).addClass("dtr-"+r.type)),i.on("column-reorder.dtr",(function(t,n,i){e._classLogic(),e._resizeAuto(),e._resize(!0)})),i.on("column-sizing.dtr",(function(){e._resizeAuto(),e._resize()})),i.on("column-calc.dt",(function(t,n){for(var i=e.s.current,r=0;r<i.length;r++){var s=n.visible.indexOf(r);!1===i[r]&&0<=s&&n.visible.splice(s,1)}})),i.on("preXhr.dtr",(function(){var t=[];i.rows().every((function(){this.child.isShown()&&t.push(this.id(!0))})),i.one("draw.dtr",(function(){e._resizeAuto(),e._resize(),i.rows(t).every((function(){e._detailsDisplay(this,!1)}))}))})),i.on("draw.dtr",(function(){e._controlClass()})).on("init.dtr",(function(t,r,s){"dt"===t.namespace&&(e._resizeAuto(),e._resize(),n.inArray(!1,e.s.current)&&i.columns.adjust())})),this._resize()},_childNodes:function(e,t,n){var i=t+"-"+n;if(this.s.childNodeStore[i])return this.s.childNodeStore[i];for(var r=[],s=e.cell(t,n).node().childNodes,o=0,d=s.length;o<d;o++)r.push(s[o]);return this.s.childNodeStore[i]=r},_childNodesRestore:function(e,t,n){var i=t+"-"+n;if(this.s.childNodeStore[i]){for(var r=e.cell(t,n).node(),s=this.s.childNodeStore[i][0].parentNode.childNodes,o=[],d=0,a=s.length;d<a;d++)o.push(s[d]);for(var l=0,c=o.length;l<c;l++)r.appendChild(o[l]);this.s.childNodeStore[i]=void 0}},_columnsVisiblity:function(e){for(var t=this.s.dt,i=this.s.columns,r=i.map((function(e,t){return{columnIdx:t,priority:e.priority}})).sort((function(e,t){return e.priority!==t.priority?e.priority-t.priority:e.columnIdx-t.columnIdx})),s=n.map(i,(function(i,r){return!1===t.column(r).visible()?"not-visible":(!i.auto||null!==i.minWidth)&&(!0===i.auto?"-":-1!==n.inArray(e,i.includeIn))})),o=0,d=0,a=s.length;d<a;d++)!0===s[d]&&(o+=i[d].minWidth);var l=(l=t.settings()[0].oScroll).sY||l.sX?l.iBarWidth:0,c=t.table().container().offsetWidth-l-o;for(d=0,a=s.length;d<a;d++)i[d].control&&(c-=i[d].minWidth);var u=!1;for(d=0,a=r.length;d<a;d++){var h=r[d].columnIdx;"-"===s[h]&&!i[h].control&&i[h].minWidth&&(u||c-i[h].minWidth<0?s[h]=!(u=!0):s[h]=!0,c-=i[h].minWidth)}var p=!1;for(d=0,a=i.length;d<a;d++)if(!i[d].control&&!i[d].never&&!1===s[d]){p=!0;break}for(d=0,a=i.length;d<a;d++)i[d].control&&(s[d]=p),"not-visible"===s[d]&&(s[d]=!1);return-1===n.inArray(!0,s)&&(s[0]=!0),s},_classLogic:function(){function e(e,n,r,d){var a,l,c;if(r){if("max-"===r)for(a=t._find(n).width,l=0,c=i.length;l<c;l++)i[l].width<=a&&o(e,i[l].name);else if("min-"===r)for(a=t._find(n).width,l=0,c=i.length;l<c;l++)i[l].width>=a&&o(e,i[l].name);else if("not-"===r)for(l=0,c=i.length;l<c;l++)-1===i[l].name.indexOf(d)&&o(e,i[l].name)}else s[e].includeIn.push(n)}var t=this,i=this.c.breakpoints,r=this.s.dt,s=r.columns().eq(0).map((function(e){var t=(n=this.column(e)).header().className,n=(e=r.settings()[0].aoColumns[e].responsivePriority,n.header().getAttribute("data-priority"));return void 0===e&&(e=null==n?1e4:+n),{className:t,includeIn:[],auto:!1,control:!1,never:!!t.match(/\b(dtr\-)?never\b/),priority:e}})),o=function(e,t){e=s[e].includeIn,-1===n.inArray(t,e)&&e.push(t)};s.each((function(t,r){for(var s=t.className.split(" "),o=!1,d=0,a=s.length;d<a;d++){var l=s[d].trim();if("all"===l||"dtr-all"===l)return o=!0,void(t.includeIn=n.map(i,(function(e){return e.name})));if("none"===l||"dtr-none"===l||t.never)return void(o=!0);if("control"===l||"dtr-control"===l)return o=!0,void(t.control=!0);n.each(i,(function(t,n){var i=n.name.split("-"),s=new RegExp("(min\\-|max\\-|not\\-)?("+i[0]+")(\\-[_a-zA-Z0-9])?");(s=l.match(s))&&(o=!0,s[2]===i[0]&&s[3]==="-"+i[1]?e(r,n.name,s[1],s[2]+s[3]):s[2]!==i[0]||s[3]||e(r,n.name,s[1],s[2]))}))}o||(t.auto=!0)})),this.s.columns=s},_controlClass:function(){var e,t,i;"inline"===this.c.details.type&&(e=this.s.dt,t=this.s.current,i=n.inArray(!0,t),e.cells(null,(function(e){return e!==i}),{page:"current"}).nodes().to$().filter(".dtr-control").removeClass("dtr-control"),e.cells(null,i,{page:"current"}).nodes().to$().addClass("dtr-control"))},_detailsDisplay:function(e,t){function r(i){n(e.node()).toggleClass("parent",!1!==i),n(d.table().node()).triggerHandler("responsive-display.dt",[d,e,i,t])}var s,o=this,d=this.s.dt,a=this.c.details;a&&!1!==a.type&&(s="string"==typeof a.renderer?i.renderer[a.renderer]():a.renderer,"boolean"==typeof(a=a.display(e,t,(function(){return s.call(o,d,e[0],o._detailsObj(e[0]))}),(function(){r(!1)})))&&r(a))},_detailsInit:function(){var e=this,t=this.s.dt,i=("inline"===(r=this.c.details).type&&(r.target="td.dtr-control, th.dtr-control"),t.on("draw.dtr",(function(){e._tabIndexes()})),e._tabIndexes(),n(t.table().body()).on("keyup.dtr","td, th",(function(e){13===e.keyCode&&n(this).data("dtr-keyboard")&&n(this).click()})),r.target),r="string"==typeof i?i:"td, th";void 0===i&&null===i||n(t.table().body()).on("click.dtr mousedown.dtr mouseup.dtr",r,(function(r){if(n(t.table().node()).hasClass("collapsed")&&-1!==n.inArray(n(this).closest("tr").get(0),t.rows().nodes().toArray())){if("number"==typeof i){var s=i<0?t.columns().eq(0).length+i:i;if(t.cell(this).index().column!==s)return}s=t.row(n(this).closest("tr")),"click"===r.type?e._detailsDisplay(s,!1):"mousedown"===r.type?n(this).css("outline","none"):"mouseup"===r.type&&n(this).trigger("blur").css("outline","")}}))},_detailsObj:function(e){var t=this,i=this.s.dt;return n.map(this.s.columns,(function(r,s){if(!r.never&&!r.control)return{className:(r=i.settings()[0].aoColumns[s]).sClass,columnIndex:s,data:i.cell(e,s).render(t.c.orthogonal),hidden:i.column(s).visible()&&!t.s.current[s],rowIndex:e,title:null!==r.sTitle?r.sTitle:n(i.column(s).header()).text()}}))},_find:function(e){for(var t=this.c.breakpoints,n=0,i=t.length;n<i;n++)if(t[n].name===e)return t[n]},_redrawChildren:function(){var e=this,t=this.s.dt;t.rows({page:"current"}).iterator("row",(function(n,i){e._detailsDisplay(t.row(i),!0)}))},_resize:function(e){for(var t,i=this,r=this.s.dt,s=n(window).innerWidth(),o=this.c.breakpoints,d=o[0].name,a=this.s.columns,l=this.s.current.slice(),c=o.length-1;0<=c;c--)if(s<=o[c].width){d=o[c].name;break}var u=this._columnsVisiblity(d),h=(this.s.current=u,!1);for(c=0,t=a.length;c<t;c++)if(!1===u[c]&&!a[c].never&&!a[c].control&&0==!r.column(c).visible()){h=!0;break}n(r.table().node()).toggleClass("collapsed",h);var p=!1,f=0;r.columns().eq(0).each((function(t,n){!0===u[n]&&f++,!e&&u[n]===l[n]||(p=!0,i._setColumnVis(t,u[n]))})),this._redrawChildren(),p&&(n(r.table().node()).trigger("responsive-resize.dt",[r,this.s.current]),0===r.page.info().recordsDisplay&&n("td",r.table().body()).eq(0).attr("colspan",f)),i._controlClass()},_resizeAuto:function(){var e,t,i,r,s,o=this.s.dt,d=this.s.columns,a=this;this.c.auto&&-1!==n.inArray(!0,n.map(d,(function(e){return e.auto})))&&(n.isEmptyObject(this.s.childNodeStore)||n.each(this.s.childNodeStore,(function(e){e=e.split("-"),a._childNodesRestore(o,+e[0],+e[1])})),o.table().node().offsetWidth,o.columns,e=o.table().node().cloneNode(!1),t=n(o.table().header().cloneNode(!1)).appendTo(e),r=n(o.table().body()).clone(!1,!1).empty().appendTo(e),e.style.width="auto",i=o.columns().header().filter((function(e){return o.column(e).visible()})).to$().clone(!1).css("display","table-cell").css("width","auto").css("min-width",0),n(r).append(n(o.rows({page:"current"}).nodes()).clone(!1)).find("th, td").css("display",""),(r=o.table().footer())&&(r=n(r.cloneNode(!1)).appendTo(e),s=o.columns().footer().filter((function(e){return o.column(e).visible()})).to$().clone(!1).css("display","table-cell"),n("<tr/>").append(s).appendTo(r)),n("<tr/>").append(i).appendTo(t),"inline"===this.c.details.type&&n(e).addClass("dtr-inline collapsed"),n(e).find("[name]").removeAttr("name"),n(e).css("position","relative"),(s=n("<div/>").css({width:1,height:1,overflow:"hidden",clear:"both"}).append(e)).insertBefore(o.table().node()),i.each((function(e){e=o.column.index("fromVisible",e),d[e].minWidth=this.offsetWidth||0})),s.remove())},_responsiveOnlyHidden:function(){var e=this.s.dt;return n.map(this.s.current,(function(t,n){return!1===e.column(n).visible()||t}))},_setColumnVis:function(e,t){var i=this,r=this.s.dt,s=t?"":"none";n(r.column(e).header()).css("display",s).toggleClass("dtr-hidden",!t),n(r.column(e).footer()).css("display",s).toggleClass("dtr-hidden",!t),r.column(e).nodes().to$().css("display",s).toggleClass("dtr-hidden",!t),n.isEmptyObject(this.s.childNodeStore)||r.cells(null,e).indexes().each((function(e){i._childNodesRestore(r,e.row,e.column)}))},_tabIndexes:function(){var e=this.s.dt,t=e.cells({page:"current"}).nodes().to$(),i=e.settings()[0],r=this.c.details.target;t.filter("[data-dtr-keyboard]").removeData("[data-dtr-keyboard]"),("number"==typeof r?e.cells(null,r,{page:"current"}).nodes().to$():("td:first-child, th:first-child"===r&&(r=">td:first-child, >th:first-child"),n(r,e.rows({page:"current"}).nodes()))).attr("tabIndex",i.iTabIndex).data("dtr-keyboard",1)}}),i.breakpoints=[{name:"desktop",width:1/0},{name:"tablet-l",width:1024},{name:"tablet-p",width:768},{name:"mobile-l",width:480},{name:"mobile-p",width:320}],i.display={childRow:function(e,t,i){return t?n(e.node()).hasClass("parent")?(e.child(i(),"child").show(),!0):void 0:e.child.isShown()?(e.child(!1),!1):(e.child(i(),"child").show(),!0)},childRowImmediate:function(e,t,n){return!t&&e.child.isShown()||!e.responsive.hasHidden()?(e.child(!1),!1):(e.child(n(),"child").show(),!0)},modal:function(e){return function(t,i,r,s){if(i){if(!(d=n("div.dtr-modal-content")).length||t.index()!==d.data("dtr-row-idx"))return null;d.empty().append(r())}else{function o(){d.remove(),n(document).off("keypress.dtr"),n(t.node()).removeClass("parent"),s()}var d=n('<div class="dtr-modal"/>').append(n('<div class="dtr-modal-display"/>').append(n('<div class="dtr-modal-content"/>').data("dtr-row-idx",t.index()).append(r())).append(n('<div class="dtr-modal-close">&times;</div>').click((function(){o()})))).append(n('<div class="dtr-modal-background"/>').click((function(){o()}))).appendTo("body");n(t.node()).addClass("parent"),n(document).on("keyup.dtr",(function(e){27===e.keyCode&&(e.stopPropagation(),o())}))}return e&&e.header&&n("div.dtr-modal-content").prepend("<h2>"+e.header(t)+"</h2>"),!0}}},i.renderer={listHiddenNodes:function(){return function(e,t,i){var r=this,s=n('<ul data-dtr-index="'+t+'" class="dtr-details"/>'),o=!1;return n.each(i,(function(t,i){var d;i.hidden&&(d=i.className?'class="'+i.className+'"':"",n("<li "+d+' data-dtr-index="'+i.columnIndex+'" data-dt-row="'+i.rowIndex+'" data-dt-column="'+i.columnIndex+'"><span class="dtr-title">'+i.title+"</span> </li>").append(n('<span class="dtr-data"/>').append(r._childNodes(e,i.rowIndex,i.columnIndex))).appendTo(s),o=!0)})),!!o&&s}},listHidden:function(){return function(e,t,i){return i=n.map(i,(function(e){var t=e.className?'class="'+e.className+'"':"";return e.hidden?"<li "+t+' data-dtr-index="'+e.columnIndex+'" data-dt-row="'+e.rowIndex+'" data-dt-column="'+e.columnIndex+'"><span class="dtr-title">'+e.title+'</span> <span class="dtr-data">'+e.data+"</span></li>":""})).join(""),!!i&&n('<ul data-dtr-index="'+t+'" class="dtr-details"/>').append(i)}},tableAll:function(e){return e=n.extend({tableClass:""},e),function(t,i,r){return r=n.map(r,(function(e){return"<tr "+(e.className?'class="'+e.className+'"':"")+' data-dt-row="'+e.rowIndex+'" data-dt-column="'+e.columnIndex+'"><td>'+e.title+":</td> <td>"+e.data+"</td></tr>"})).join(""),n('<table class="'+e.tableClass+' dtr-details" width="100%"/>').append(r)}}},i.defaults={breakpoints:i.breakpoints,auto:!0,details:{display:i.display.childRow,renderer:i.renderer.listHidden(),target:0,type:"inline"},orthogonal:"display"},n.fn.dataTable.Api);r.register("responsive()",(function(){return this})),r.register("responsive.index()",(function(e){return{column:(e=n(e)).data("dtr-index"),row:e.parent().data("dtr-index")}})),r.register("responsive.rebuild()",(function(){return this.iterator("table",(function(e){e._responsive&&e._responsive._classLogic()}))})),r.register("responsive.recalc()",(function(){return this.iterator("table",(function(e){e._responsive&&(e._responsive._resizeAuto(),e._responsive._resize())}))})),r.register("responsive.hasHidden()",(function(){var e=this.context[0];return!!e._responsive&&-1!==n.inArray(!1,e._responsive._responsiveOnlyHidden())})),r.registerPlural("columns().responsiveHidden()","column().responsiveHidden()",(function(){return this.iterator("column",(function(e,t){return!!e._responsive&&e._responsive._responsiveOnlyHidden()[t]}),1)})),i.version="2.5.0",n.fn.dataTable.Responsive=i,n.fn.DataTable.Responsive=i,n(document).on("preInit.dt.dtr",(function(e,r,s){"dt"===e.namespace&&(n(r.nTable).hasClass("responsive")||n(r.nTable).hasClass("dt-responsive")||r.oInit.responsive||t.defaults.responsive)&&!1!==(e=r.oInit.responsive)&&new i(r,n.isPlainObject(e)?e:{})}));export default t;