/*! For license information please see dataTables.responsive.mjs.LICENSE.txt */
import t from"jquery";import e from"datatables.net";let n=t;var i=function(t,r){if(!e.versionCheck||!e.versionCheck("1.10.10"))throw"DataTables Responsive requires DataTables 1.10.10 or newer";this.s={childNodeStore:{},columns:[],current:[],dt:new e.Api(t)},this.s.dt.settings()[0].responsive||(r&&"string"==typeof r.details?r.details={type:r.details}:r&&!1===r.details?r.details={type:!1}:r&&!0===r.details&&(r.details={type:"inline"}),this.c=n.extend(!0,{},i.defaults,e.defaults.responsive,r),t.responsive=this,this._constructor())};n.extend(i.prototype,{_constructor:function(){var t=this,i=this.s.dt,r=i.settings()[0],s=n(window).innerWidth();i.settings()[0]._responsive=this,n(window).on("resize.dtr orientationchange.dtr",e.util.throttle((function(){var e=n(window).innerWidth();e!==s&&(t._resize(),s=e)}))),r.oApi._fnCallbackReg(r,"aoRowCreatedCallback",(function(e,r,s){-1!==n.inArray(!1,t.s.current)&&n(">td, >th",e).each((function(e){var r=i.column.index("toData",e);!1===t.s.current[r]&&n(this).css("display","none")}))})),i.on("destroy.dtr",(function(){i.off(".dtr"),n(i.table().body()).off(".dtr"),n(window).off("resize.dtr orientationchange.dtr"),i.cells(".dtr-control").nodes().to$().removeClass("dtr-control"),n.each(t.s.current,(function(e,n){!1===n&&t._setColumnVis(e,!0)}))})),this.c.breakpoints.sort((function(t,e){return t.width<e.width?1:t.width>e.width?-1:0})),this._classLogic(),this._resizeAuto();var o=this.c.details;!1!==o.type&&(t._detailsInit(),i.on("column-visibility.dtr",(function(){t._timer&&clearTimeout(t._timer),t._timer=setTimeout((function(){t._timer=null,t._classLogic(),t._resizeAuto(),t._resize(!0),t._redrawChildren()}),100)})),i.on("draw.dtr",(function(){t._redrawChildren()})),n(i.table().node()).addClass("dtr-"+o.type)),i.on("column-reorder.dtr",(function(e,n,i){t._classLogic(),t._resizeAuto(),t._resize(!0)})),i.on("column-sizing.dtr",(function(){t._resizeAuto(),t._resize()})),i.on("column-calc.dt",(function(e,n){for(var i=t.s.current,r=0;r<i.length;r++){var s=n.visible.indexOf(r);!1===i[r]&&s>=0&&n.visible.splice(s,1)}})),i.on("preXhr.dtr",(function(){var e=[];i.rows().every((function(){this.child.isShown()&&e.push(this.id(!0))})),i.one("draw.dtr",(function(){t._resizeAuto(),t._resize(),i.rows(e).every((function(){t._detailsDisplay(this,!1)}))}))})),i.on("draw.dtr",(function(){t._controlClass()})).on("init.dtr",(function(e,r,s){"dt"===e.namespace&&(t._resizeAuto(),t._resize(),n.inArray(!1,t.s.current)&&i.columns.adjust())})),this._resize()},_childNodes:function(t,e,n){var i=e+"-"+n;if(this.s.childNodeStore[i])return this.s.childNodeStore[i];for(var r=[],s=t.cell(e,n).node().childNodes,o=0,d=s.length;o<d;o++)r.push(s[o]);return this.s.childNodeStore[i]=r,r},_childNodesRestore:function(t,e,n){var i=e+"-"+n;if(this.s.childNodeStore[i]){for(var r=t.cell(e,n).node(),s=this.s.childNodeStore[i][0].parentNode.childNodes,o=[],d=0,a=s.length;d<a;d++)o.push(s[d]);for(var l=0,c=o.length;l<c;l++)r.appendChild(o[l]);this.s.childNodeStore[i]=void 0}},_columnsVisiblity:function(t){var e,i,r=this.s.dt,s=this.s.columns,o=s.map((function(t,e){return{columnIdx:e,priority:t.priority}})).sort((function(t,e){return t.priority!==e.priority?t.priority-e.priority:t.columnIdx-e.columnIdx})),d=n.map(s,(function(e,i){return!1===r.column(i).visible()?"not-visible":(!e.auto||null!==e.minWidth)&&(!0===e.auto?"-":-1!==n.inArray(t,e.includeIn))})),a=0;for(e=0,i=d.length;e<i;e++)!0===d[e]&&(a+=s[e].minWidth);var l=r.settings()[0].oScroll,c=l.sY||l.sX?l.iBarWidth:0,u=r.table().container().offsetWidth-c-a;for(e=0,i=d.length;e<i;e++)s[e].control&&(u-=s[e].minWidth);var h=!1;for(e=0,i=o.length;e<i;e++){var p=o[e].columnIdx;"-"===d[p]&&!s[p].control&&s[p].minWidth&&(h||u-s[p].minWidth<0?(h=!0,d[p]=!1):d[p]=!0,u-=s[p].minWidth)}var f=!1;for(e=0,i=s.length;e<i;e++)if(!s[e].control&&!s[e].never&&!1===d[e]){f=!0;break}for(e=0,i=s.length;e<i;e++)s[e].control&&(d[e]=f),"not-visible"===d[e]&&(d[e]=!1);return-1===n.inArray(!0,d)&&(d[0]=!0),d},_classLogic:function(){var t=this,e=this.c.breakpoints,i=this.s.dt,r=i.columns().eq(0).map((function(t){var e=this.column(t),n=e.header().className,r=i.settings()[0].aoColumns[t].responsivePriority,s=e.header().getAttribute("data-priority");return void 0===r&&(r=null==s?1e4:1*s),{className:n,includeIn:[],auto:!1,control:!1,never:!!n.match(/\b(dtr\-)?never\b/),priority:r}})),s=function(t,e){var i=r[t].includeIn;-1===n.inArray(e,i)&&i.push(e)},o=function(n,i,o,d){var a,l,c;if(o){if("max-"===o)for(a=t._find(i).width,l=0,c=e.length;l<c;l++)e[l].width<=a&&s(n,e[l].name);else if("min-"===o)for(a=t._find(i).width,l=0,c=e.length;l<c;l++)e[l].width>=a&&s(n,e[l].name);else if("not-"===o)for(l=0,c=e.length;l<c;l++)-1===e[l].name.indexOf(d)&&s(n,e[l].name)}else r[n].includeIn.push(i)};r.each((function(t,i){for(var r=t.className.split(" "),s=!1,d=0,a=r.length;d<a;d++){var l=r[d].trim();if("all"===l||"dtr-all"===l)return s=!0,void(t.includeIn=n.map(e,(function(t){return t.name})));if("none"===l||"dtr-none"===l||t.never)return void(s=!0);if("control"===l||"dtr-control"===l)return s=!0,void(t.control=!0);n.each(e,(function(t,e){var n=e.name.split("-"),r=new RegExp("(min\\-|max\\-|not\\-)?("+n[0]+")(\\-[_a-zA-Z0-9])?"),d=l.match(r);d&&(s=!0,d[2]===n[0]&&d[3]==="-"+n[1]?o(i,e.name,d[1],d[2]+d[3]):d[2]!==n[0]||d[3]||o(i,e.name,d[1],d[2]))}))}s||(t.auto=!0)})),this.s.columns=r},_controlClass:function(){if("inline"===this.c.details.type){var t=this.s.dt,e=this.s.current,i=n.inArray(!0,e);t.cells(null,(function(t){return t!==i}),{page:"current"}).nodes().to$().filter(".dtr-control").removeClass("dtr-control"),t.cells(null,i,{page:"current"}).nodes().to$().addClass("dtr-control")}},_detailsDisplay:function(t,e){var r=this,s=this.s.dt,o=this.c.details,d=function(i){n(t.node()).toggleClass("parent",!1!==i),n(s.table().node()).triggerHandler("responsive-display.dt",[s,t,i,e])};if(o&&!1!==o.type){var a="string"==typeof o.renderer?i.renderer[o.renderer]():o.renderer,l=o.display(t,e,(function(){return a.call(r,s,t[0],r._detailsObj(t[0]))}),(function(){d(!1)}));"boolean"==typeof l&&d(l)}},_detailsInit:function(){var t=this,e=this.s.dt,i=this.c.details;"inline"===i.type&&(i.target="td.dtr-control, th.dtr-control"),e.on("draw.dtr",(function(){t._tabIndexes()})),t._tabIndexes(),n(e.table().body()).on("keyup.dtr","td, th",(function(t){13===t.keyCode&&n(this).data("dtr-keyboard")&&n(this).click()}));var r=i.target,s="string"==typeof r?r:"td, th";void 0===r&&null===r||n(e.table().body()).on("click.dtr mousedown.dtr mouseup.dtr",s,(function(i){if(n(e.table().node()).hasClass("collapsed")&&-1!==n.inArray(n(this).closest("tr").get(0),e.rows().nodes().toArray())){if("number"==typeof r){var s=r<0?e.columns().eq(0).length+r:r;if(e.cell(this).index().column!==s)return}var o=e.row(n(this).closest("tr"));"click"===i.type?t._detailsDisplay(o,!1):"mousedown"===i.type?n(this).css("outline","none"):"mouseup"===i.type&&n(this).trigger("blur").css("outline","")}}))},_detailsObj:function(t){var e=this,i=this.s.dt;return n.map(this.s.columns,(function(r,s){if(!r.never&&!r.control){var o=i.settings()[0].aoColumns[s];return{className:o.sClass,columnIndex:s,data:i.cell(t,s).render(e.c.orthogonal),hidden:i.column(s).visible()&&!e.s.current[s],rowIndex:t,title:null!==o.sTitle?o.sTitle:n(i.column(s).header()).text()}}}))},_find:function(t){for(var e=this.c.breakpoints,n=0,i=e.length;n<i;n++)if(e[n].name===t)return e[n]},_redrawChildren:function(){var t=this,e=this.s.dt;e.rows({page:"current"}).iterator("row",(function(n,i){t._detailsDisplay(e.row(i),!0)}))},_resize:function(t){var e,i,r=this,s=this.s.dt,o=n(window).innerWidth(),d=this.c.breakpoints,a=d[0].name,l=this.s.columns,c=this.s.current.slice();for(e=d.length-1;e>=0;e--)if(o<=d[e].width){a=d[e].name;break}var u=this._columnsVisiblity(a);this.s.current=u;var h=!1;for(e=0,i=l.length;e<i;e++)if(!1===u[e]&&!l[e].never&&!l[e].control&&!1==!s.column(e).visible()){h=!0;break}n(s.table().node()).toggleClass("collapsed",h);var p=!1,f=0;s.columns().eq(0).each((function(e,n){!0===u[n]&&f++,(t||u[n]!==c[n])&&(p=!0,r._setColumnVis(e,u[n]))})),this._redrawChildren(),p&&(n(s.table().node()).trigger("responsive-resize.dt",[s,this.s.current]),0===s.page.info().recordsDisplay&&n("td",s.table().body()).eq(0).attr("colspan",f)),r._controlClass()},_resizeAuto:function(){var t=this.s.dt,e=this.s.columns,i=this;if(this.c.auto&&-1!==n.inArray(!0,n.map(e,(function(t){return t.auto})))){n.isEmptyObject(this.s.childNodeStore)||n.each(this.s.childNodeStore,(function(e){var n=e.split("-");i._childNodesRestore(t,1*n[0],1*n[1])}));t.table().node().offsetWidth,t.columns;var r=t.table().node().cloneNode(!1),s=n(t.table().header().cloneNode(!1)).appendTo(r),o=n(t.table().body()).clone(!1,!1).empty().appendTo(r);r.style.width="auto";var d=t.columns().header().filter((function(e){return t.column(e).visible()})).to$().clone(!1).css("display","table-cell").css("width","auto").css("min-width",0);n(o).append(n(t.rows({page:"current"}).nodes()).clone(!1)).find("th, td").css("display","");var a=t.table().footer();if(a){var l=n(a.cloneNode(!1)).appendTo(r),c=t.columns().footer().filter((function(e){return t.column(e).visible()})).to$().clone(!1).css("display","table-cell");n("<tr/>").append(c).appendTo(l)}n("<tr/>").append(d).appendTo(s),"inline"===this.c.details.type&&n(r).addClass("dtr-inline collapsed"),n(r).find("[name]").removeAttr("name"),n(r).css("position","relative");var u=n("<div/>").css({width:1,height:1,overflow:"hidden",clear:"both"}).append(r);u.insertBefore(t.table().node()),d.each((function(n){var i=t.column.index("fromVisible",n);e[i].minWidth=this.offsetWidth||0})),u.remove()}},_responsiveOnlyHidden:function(){var t=this.s.dt;return n.map(this.s.current,(function(e,n){return!1===t.column(n).visible()||e}))},_setColumnVis:function(t,e){var i=this,r=this.s.dt,s=e?"":"none";n(r.column(t).header()).css("display",s).toggleClass("dtr-hidden",!e),n(r.column(t).footer()).css("display",s).toggleClass("dtr-hidden",!e),r.column(t).nodes().to$().css("display",s).toggleClass("dtr-hidden",!e),n.isEmptyObject(this.s.childNodeStore)||r.cells(null,t).indexes().each((function(t){i._childNodesRestore(r,t.row,t.column)}))},_tabIndexes:function(){var t=this.s.dt,e=t.cells({page:"current"}).nodes().to$(),i=t.settings()[0],r=this.c.details.target;e.filter("[data-dtr-keyboard]").removeData("[data-dtr-keyboard]"),"number"==typeof r?t.cells(null,r,{page:"current"}).nodes().to$().attr("tabIndex",i.iTabIndex).data("dtr-keyboard",1):("td:first-child, th:first-child"===r&&(r=">td:first-child, >th:first-child"),n(r,t.rows({page:"current"}).nodes()).attr("tabIndex",i.iTabIndex).data("dtr-keyboard",1))}}),i.breakpoints=[{name:"desktop",width:1/0},{name:"tablet-l",width:1024},{name:"tablet-p",width:768},{name:"mobile-l",width:480},{name:"mobile-p",width:320}],i.display={childRow:function(t,e,i){return e?n(t.node()).hasClass("parent")?(t.child(i(),"child").show(),!0):void 0:t.child.isShown()?(t.child(!1),!1):(t.child(i(),"child").show(),!0)},childRowImmediate:function(t,e,n){return!e&&t.child.isShown()||!t.responsive.hasHidden()?(t.child(!1),!1):(t.child(n(),"child").show(),!0)},modal:function(t){return function(e,i,r,s){if(i){if(!(d=n("div.dtr-modal-content")).length||e.index()!==d.data("dtr-row-idx"))return null;d.empty().append(r())}else{var o=function(){d.remove(),n(document).off("keypress.dtr"),n(e.node()).removeClass("parent"),s()},d=n('<div class="dtr-modal"/>').append(n('<div class="dtr-modal-display"/>').append(n('<div class="dtr-modal-content"/>').data("dtr-row-idx",e.index()).append(r())).append(n('<div class="dtr-modal-close">&times;</div>').click((function(){o()})))).append(n('<div class="dtr-modal-background"/>').click((function(){o()}))).appendTo("body");n(e.node()).addClass("parent"),n(document).on("keyup.dtr",(function(t){27===t.keyCode&&(t.stopPropagation(),o())}))}return t&&t.header&&n("div.dtr-modal-content").prepend("<h2>"+t.header(e)+"</h2>"),!0}}},i.renderer={listHiddenNodes:function(){return function(t,e,i){var r=this,s=n('<ul data-dtr-index="'+e+'" class="dtr-details"/>'),o=!1;n.each(i,(function(e,i){if(i.hidden){var d=i.className?'class="'+i.className+'"':"";n("<li "+d+' data-dtr-index="'+i.columnIndex+'" data-dt-row="'+i.rowIndex+'" data-dt-column="'+i.columnIndex+'"><span class="dtr-title">'+i.title+"</span> </li>").append(n('<span class="dtr-data"/>').append(r._childNodes(t,i.rowIndex,i.columnIndex))).appendTo(s),o=!0}}));return!!o&&s}},listHidden:function(){return function(t,e,i){var r=n.map(i,(function(t){var e=t.className?'class="'+t.className+'"':"";return t.hidden?"<li "+e+' data-dtr-index="'+t.columnIndex+'" data-dt-row="'+t.rowIndex+'" data-dt-column="'+t.columnIndex+'"><span class="dtr-title">'+t.title+'</span> <span class="dtr-data">'+t.data+"</span></li>":""})).join("");return!!r&&n('<ul data-dtr-index="'+e+'" class="dtr-details"/>').append(r)}},tableAll:function(t){return t=n.extend({tableClass:""},t),function(e,i,r){var s=n.map(r,(function(t){return"<tr "+(t.className?'class="'+t.className+'"':"")+' data-dt-row="'+t.rowIndex+'" data-dt-column="'+t.columnIndex+'"><td>'+t.title+":</td> <td>"+t.data+"</td></tr>"})).join("");return n('<table class="'+t.tableClass+' dtr-details" width="100%"/>').append(s)}}},i.defaults={breakpoints:i.breakpoints,auto:!0,details:{display:i.display.childRow,renderer:i.renderer.listHidden(),target:0,type:"inline"},orthogonal:"display"};var r=n.fn.dataTable.Api;r.register("responsive()",(function(){return this})),r.register("responsive.index()",(function(t){return{column:(t=n(t)).data("dtr-index"),row:t.parent().data("dtr-index")}})),r.register("responsive.rebuild()",(function(){return this.iterator("table",(function(t){t._responsive&&t._responsive._classLogic()}))})),r.register("responsive.recalc()",(function(){return this.iterator("table",(function(t){t._responsive&&(t._responsive._resizeAuto(),t._responsive._resize())}))})),r.register("responsive.hasHidden()",(function(){var t=this.context[0];return!!t._responsive&&-1!==n.inArray(!1,t._responsive._responsiveOnlyHidden())})),r.registerPlural("columns().responsiveHidden()","column().responsiveHidden()",(function(){return this.iterator("column",(function(t,e){return!!t._responsive&&t._responsive._responsiveOnlyHidden()[e]}),1)})),i.version="2.5.0",n.fn.dataTable.Responsive=i,n.fn.DataTable.Responsive=i,n(document).on("preInit.dt.dtr",(function(t,r,s){if("dt"===t.namespace&&(n(r.nTable).hasClass("responsive")||n(r.nTable).hasClass("dt-responsive")||r.oInit.responsive||e.defaults.responsive)){var o=r.oInit.responsive;!1!==o&&new i(r,n.isPlainObject(o)?o:{})}}));export default e;