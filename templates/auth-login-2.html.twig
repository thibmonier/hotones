{% extends 'layouts/layouts-without-nav.html.twig' %}
{% block title %}Connectez-vous à votre compte HotOnes{% endblock %}

{% block stylesheets %}
<!-- Force dark theme for login page only -->
<script>
    // Force dark theme before plugin.js loads
    document.documentElement.setAttribute('data-bs-theme', 'dark');

    // Save current theme preference to restore after login
    if (window.sessionStorage) {
        var currentTheme = sessionStorage.getItem('is_visited');
        // Temporarily set dark mode for login page only
        sessionStorage.setItem('login_page_override', 'true');
        // Store original preference to restore later
        if (currentTheme && currentTheme !== 'dark-mode-switch') {
            sessionStorage.setItem('original_theme', currentTheme);
        }
    }
</script>

<!-- owl.carousel css -->
<link rel="stylesheet" href="assets/libs/owl.carousel/assets/owl.carousel.min.css">

<link rel="stylesheet" href="assets/libs/owl.carousel/assets/owl.theme.default.min.css">
{% endblock %}

{% block body_tag %}
<body class="auth-body-bg">
{% endblock %}

{% block content %}

<div>
    <div class="container-fluid p-0">
        <div class="row g-0">

            <div class="col-xl-9">
                <div class="auth-full-bg pt-lg-5 p-4">
                    <div class="w-100">
                        <div class="bg-overlay"></div>
                        <div class="d-flex h-100 flex-column">

                            <div class="p-4 mt-auto">
                                <div class="row justify-content-center">
                                    <div class="col-lg-7">
                                        <div class="text-center">

                                            <h4 class="mb-3"><i class="bx bxs-quote-alt-left text-primary h1 align-middle me-3"></i><span class="text-primary">5k</span>+ Satisfied clients</h4>

                                            <div dir="ltr">
                                                <div class="owl-carousel owl-theme auth-review-carousel" id="auth-review-carousel">
                                                    <div class="item">
                                                        <div class="py-3">
                                                            <p class="font-size-16 mb-4">" Application de gestion d'agence digitale "</p>

{#                                                            <div>#}
{#                                                                <h4 class="font-size-16 text-primary">Abs1981</h4>#}
{#                                                                <p class="font-size-14 mb-0">- Skote User</p>#}
{#                                                            </div>#}
                                                        </div>

                                                    </div>

                                                    <div class="item">
                                                        <div class="py-3">
                                                            <p class="font-size-16 mb-4">" Si toutes les applications étaient aussi simples "</p>

{#                                                            <div>#}
{#                                                                <h4 class="font-size-16 text-primary">nezerious</h4>#}
{#                                                                <p class="font-size-14 mb-0">- Skote User</p>#}
{#                                                            </div>#}
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end col -->

            <div class="col-xl-3">
                <div class="auth-full-page-content p-md-5 p-4">
                    <div class="w-100">

                        <div class="d-flex flex-column h-100">
                            <div class="mb-4 mb-md-5">
                                <a href="/" class="d-block card-logo">
                                    {# Only show light logo since login page is always in dark mode #}
                                    <picture>
                                        <source srcset="{{ asset('assets/images/logo-hotones-light.svg') }}" type="image/svg+xml">
                                        <source srcset="{{ asset('assets/images/logo-hotones-light-250.webp') }}" type="image/webp">
                                        <img src="{{ asset('assets/images/logo-hotones-light-250.png') }}" alt="HotOnes" class="img-fluid" style="max-width: 200px; height: auto;">
                                    </picture>
                                </a>
                            </div>
                            <div class="my-auto">

                                <div>
                                    <h5 class="text-primary">BIENVENUE !</h5>
                                    <p class="text-muted">Connectez-vous pour utiliser HotOnes et gérer vos projets</p>
                                </div>

                                {% if error_message is defined and error_message %}
                                    <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                        <i class="mdi mdi-block-helper me-2"></i>
                                        {{ error_message }}
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                    </div>
                                {% endif %}

                                <div class="mt-4">
                                    <form method="post" action="{{ form_action|default('/') }}">
                                        <div class="mb-3">
                                            <label for="username" class="form-label">Email</label>
                                            <input type="email" class="form-control" id="username" name="_username" value="{{ username_value|default('') }}" placeholder="email@exemple.com" required autofocus>
                                        </div>

                                        <div class="mb-3">
                                            <label class="form-label">Mot de passe</label>
                                            <div class="input-group auth-pass-inputgroup">
                                                <input type="password" class="form-control" id="password-input" name="_password" placeholder="Saisissez votre mot de passe" aria-label="Password" aria-describedby="password-addon" required>
                                                <button class="btn btn-light" type="button" id="password-addon">
                                                    <i class="mdi mdi-eye-outline"></i>
                                                </button>
                                            </div>
{#                                        </div>#}
{#                                        <div class="mb-3">#}
{#                                            <label for="username" class="form-label">Nom d'utilisateur</label>#}
{#                                            <input type="text" class="form-control" id="username" placeholder="Entrez le nom d'utilisateur">#}
{#                                        </div>#}

{#                                        <div class="mb-3">#}
{#                                            <div class="float-end">#}
{#                                                <a href="auth-recoverpw-2" class="text-muted">Forgot password?</a>#}
{#                                            </div>#}
{#                                            <label class="form-label">Mot de passe</label>#}
{#                                            <div class="input-group auth-pass-inputgroup">#}
{#                                                <input type="password" class="form-control" placeholder="Entrez votre mot de passe" aria-label="Password" aria-describedby="password-addon">#}
{#                                                <button class="btn btn-light " type="button" id="password-addon"><i class="mdi mdi-eye-outline"></i></button>#}
{#                                            </div>#}
{#                                        </div>#}

                                            <input type="hidden" name="_csrf_token" value="{{ csrf_token_value|default('') }}">

                                            <div class="mt-3 d-grid">
                                                <button class="btn btn-primary waves-effect waves-light" type="submit">
                                                    <i class="bx bx-log-in-circle me-1"></i> Se connecter
                                                </button>
                                            </div>


{#                                        <div class="mt-4 text-center">#}
{#                                            <h5 class="font-size-14 mb-3">Sign in with</h5>#}

{#                                            <ul class="list-inline">#}
{#                                                <li class="list-inline-item">#}
{#                                                    <a href="javascript::void()" class="social-list-item bg-primary text-white border-primary">#}
{#                                                        <i class="mdi mdi-facebook"></i>#}
{#                                                    </a>#}
{#                                                </li>#}
{#                                                <li class="list-inline-item">#}
{#                                                    <a href="javascript::void()" class="social-list-item bg-info text-white border-info">#}
{#                                                        <i class="mdi mdi-twitter"></i>#}
{#                                                    </a>#}
{#                                                </li>#}
{#                                                <li class="list-inline-item">#}
{#                                                    <a href="javascript::void()" class="social-list-item bg-danger text-white border-danger">#}
{#                                                        <i class="mdi mdi-google"></i>#}
{#                                                    </a>#}
{#                                                </li>#}
{#                                            </ul>#}
{#                                        </div>#}

                                    </form>
{#                                    <div class="mt-5 text-center">#}
{#                                        <p>Don't have an account ? <a href="auth-register-2" class="fw-medium text-primary"> Signup now </a> </p>#}
{#                                    </div>#}
                                </div>
                            </div>

                            <div class="mt-4 mt-md-5 text-center">
                                <p class="mb-0">© <script>document.write(new Date().getFullYear())</script> HotOnes. Crafted with <i class="mdi mdi-heart text-danger"></i> by Thib</p>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
            <!-- end col -->
        </div>
        <!-- end row -->
    </div>
    <!-- end container-fluid -->
</div>

{% endblock %}

{% block javascripts %}
<!-- owl.carousel js -->
<script src="assets/libs/owl.carousel/owl.carousel.min.js"></script>

<!-- auth-2-carousel init -->
<script src="assets/js/pages/auth-2-carousel.init.js"></script>

<!-- App js -->
<script src="assets/js/app.js"></script>

<!-- Enforce dark theme for login page -->
<script>
    (function() {
        // Force dark theme after all scripts load
        document.documentElement.setAttribute('data-bs-theme', 'dark');

        // Cleanup on page unload (user logs in or navigates away)
        window.addEventListener('beforeunload', function() {
            if (window.sessionStorage) {
                var originalTheme = sessionStorage.getItem('original_theme');
                sessionStorage.removeItem('login_page_override');
                sessionStorage.removeItem('original_theme');
                // Restore original theme preference if it existed
                if (originalTheme) {
                    sessionStorage.setItem('is_visited', originalTheme);
                }
            }
        });

        // Also prevent theme switcher from affecting this page
        var themeSwitchers = document.querySelectorAll('.theme-choice');
        themeSwitchers.forEach(function(switcher) {
            switcher.disabled = true;
        });
    })();
</script>
{% endblock %}
