parameters:
    level: 4
    treatPhpDocTypesAsCertain: false
    paths:
        - src
    excludePaths:
        - src/Kernel.php
        - src/Components/
        - migrations/
        - docs
        - vendor
        - translations
        - docker
    doctrine:
        objectManagerLoader: tests/object-manager.php
    symfony:
#        containerXmlPath: var/cache/dev/App_KernelDevDebugContainer.xml
        consoleApplicationLoader: tests/console-application.php

    ignoreErrors:
        # Ignore Doctrine collection generics for now
        - '#Property .+ type mapping mismatch#'
        # Ignore undefined methods in entities during development
        - '#Call to an undefined method .+::(setDescription|setTjm|modify|setContingencyPercentage|setValidUntil|getContingencyPercentage|getDescription|setName|setSortOrder|setPurchaseAmount|getTimesheets|getTask|setWorkTimePercentage|addProfile|getWorkTimePercentage|getProfiles)\(\)#'
        # Ignore Symfony Scheduler API mismatches (to be refactored later)
        - '#Call to an undefined method .*CronExpressionTrigger::withDescription\(\)#'
        - '#Call to method withName\(\) on an unknown class .*RecurringCommand#'
        - '#Instantiated class .*RecurringCommand not found#'

        # Disable overly strict rules from phpstan-strict-rules
        # Allow non-boolean in conditions (common PHP pattern)
        - identifier: if.condNotBoolean
        - identifier: booleanNot.exprNotBoolean
        - identifier: booleanAnd.leftNotBoolean
        - identifier: booleanAnd.rightNotBoolean
        - identifier: ternary.condNotBoolean
        - identifier: elseif.condNotBoolean

        # Allow empty() construct (common and useful)
        - identifier: empty.notAllowed

        # Allow short ternary operator (readable and common)
        - identifier: ternary.shortNotAllowed

        # Allow useless casts from PHPDoc (PHPDoc types are not always reliable)
        - identifier: cast.useless
